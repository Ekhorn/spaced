(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ys(e,t){return function(){return e.apply(t,arguments)}}const{toString:fa}=Object.prototype,{getPrototypeOf:Or}=Object,bn=(e=>t=>{const n=fa.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),De=e=>(e=e.toLowerCase(),t=>bn(t)===e),_n=e=>t=>typeof t===e,{isArray:lt}=Array,Ot=_n("undefined");function ha(e){return e!==null&&!Ot(e)&&e.constructor!==null&&!Ot(e.constructor)&&Se(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ws=De("ArrayBuffer");function da(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ws(e.buffer),t}const pa=_n("string"),Se=_n("function"),bs=_n("number"),xn=e=>e!==null&&typeof e=="object",ma=e=>e===!0||e===!1,en=e=>{if(bn(e)!=="object")return!1;const t=Or(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ga=De("Date"),ya=De("File"),wa=De("Blob"),ba=De("FileList"),_a=e=>xn(e)&&Se(e.pipe),xa=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Se(e.append)&&((t=bn(e))==="formdata"||t==="object"&&Se(e.toString)&&e.toString()==="[object FormData]"))},ka=De("URLSearchParams"),Sa=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pt(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),lt(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function _s(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const xs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ks=e=>!Ot(e)&&e!==xs;function Yn(){const{caseless:e}=ks(this)&&this||{},t={},n=(r,i)=>{const s=e&&_s(t,i)||i;en(t[s])&&en(r)?t[s]=Yn(t[s],r):en(r)?t[s]=Yn({},r):lt(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Pt(arguments[r],n);return t}const Ea=(e,t,n,{allOwnKeys:r}={})=>(Pt(t,(i,s)=>{n&&Se(i)?e[s]=ys(i,n):e[s]=i},{allOwnKeys:r}),e),Aa=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ca=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Oa=(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Or(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},va=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Ta=e=>{if(!e)return null;if(lt(e))return e;let t=e.length;if(!bs(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ra=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Or(Uint8Array)),Ia=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},La=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Pa=De("HTMLFormElement"),Na=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),li=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ma=De("RegExp"),Ss=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Pt(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},Fa=e=>{Ss(e,(t,n)=>{if(Se(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Se(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Da=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return lt(e)?r(e):r(String(e).split(t)),n},Ba=()=>{},za=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Mn="abcdefghijklmnopqrstuvwxyz",ui="0123456789",Es={DIGIT:ui,ALPHA:Mn,ALPHA_DIGIT:Mn+Mn.toUpperCase()+ui},$a=(e=16,t=Es.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Ua(e){return!!(e&&Se(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ja=e=>{const t=new Array(10),n=(r,i)=>{if(xn(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=lt(r)?[]:{};return Pt(r,(o,a)=>{const u=n(o,i+1);!Ot(u)&&(s[a]=u)}),t[i]=void 0,s}}return r};return n(e,0)},Wa=De("AsyncFunction"),qa=e=>e&&(xn(e)||Se(e))&&Se(e.then)&&Se(e.catch),_={isArray:lt,isArrayBuffer:ws,isBuffer:ha,isFormData:xa,isArrayBufferView:da,isString:pa,isNumber:bs,isBoolean:ma,isObject:xn,isPlainObject:en,isUndefined:Ot,isDate:ga,isFile:ya,isBlob:wa,isRegExp:Ma,isFunction:Se,isStream:_a,isURLSearchParams:ka,isTypedArray:Ra,isFileList:ba,forEach:Pt,merge:Yn,extend:Ea,trim:Sa,stripBOM:Aa,inherits:Ca,toFlatObject:Oa,kindOf:bn,kindOfTest:De,endsWith:va,toArray:Ta,forEachEntry:Ia,matchAll:La,isHTMLForm:Pa,hasOwnProperty:li,hasOwnProp:li,reduceDescriptors:Ss,freezeMethods:Fa,toObjectSet:Da,toCamelCase:Na,noop:Ba,toFiniteNumber:za,findKey:_s,global:xs,isContextDefined:ks,ALPHABET:Es,generateString:$a,isSpecCompliantForm:Ua,toJSONObject:ja,isAsyncFn:Wa,isThenable:qa};function q(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}_.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const As=q.prototype,Cs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Cs[e]={value:e}});Object.defineProperties(q,Cs);Object.defineProperty(As,"isAxiosError",{value:!0});q.from=(e,t,n,r,i,s)=>{const o=Object.create(As);return _.toFlatObject(e,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),q.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Ha=null;function Jn(e){return _.isPlainObject(e)||_.isArray(e)}function Os(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function ci(e,t,n){return e?e.concat(t).map(function(i,s){return i=Os(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function Va(e){return _.isArray(e)&&!e.some(Jn)}const Ka=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function kn(e,t,n){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,E){return!_.isUndefined(E[w])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(i))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(_.isDate(g))return g.toISOString();if(!u&&_.isBlob(g))throw new q("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(g)||_.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,w,E){let y=g;if(g&&!E&&typeof g=="object"){if(_.endsWith(w,"{}"))w=r?w:w.slice(0,-2),g=JSON.stringify(g);else if(_.isArray(g)&&Va(g)||(_.isFileList(g)||_.endsWith(w,"[]"))&&(y=_.toArray(g)))return w=Os(w),y.forEach(function(k,P){!(_.isUndefined(k)||k===null)&&t.append(o===!0?ci([w],P,s):o===null?w:w+"[]",l(k))}),!1}return Jn(g)?!0:(t.append(ci(E,w,s),l(g)),!1)}const f=[],m=Object.assign(Ka,{defaultVisitor:c,convertValue:l,isVisitable:Jn});function p(g,w){if(!_.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(g),_.forEach(g,function(y,b){(!(_.isUndefined(y)||y===null)&&i.call(t,y,_.isString(b)?b.trim():b,w,m))===!0&&p(y,w?w.concat(b):[b])}),f.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return p(e),t}function fi(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function vr(e,t){this._pairs=[],e&&kn(e,this,t)}const vs=vr.prototype;vs.append=function(t,n){this._pairs.push([t,n])};vs.toString=function(t){const n=t?function(r){return t.call(this,r,fi)}:fi;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Ga(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ts(e,t,n){if(!t)return e;const r=n&&n.encode||Ga,i=n&&n.serialize;let s;if(i?s=i(t,n):s=_.isURLSearchParams(t)?t.toString():new vr(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class hi{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Rs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ya=typeof URLSearchParams<"u"?URLSearchParams:vr,Ja=typeof FormData<"u"?FormData:null,Qa=typeof Blob<"u"?Blob:null,Xa={isBrowser:!0,classes:{URLSearchParams:Ya,FormData:Ja,Blob:Qa},protocols:["http","https","file","blob","url","data"]},Is=typeof window<"u"&&typeof document<"u",Za=(e=>Is&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),el=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tl=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Is,hasStandardBrowserEnv:Za,hasStandardBrowserWebWorkerEnv:el},Symbol.toStringTag,{value:"Module"})),Me={...tl,...Xa};function nl(e,t){return kn(e,new Me.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Me.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function rl(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function il(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function Ls(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&_.isArray(i)?i.length:o,u?(_.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!_.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&_.isArray(i[o])&&(i[o]=il(i[o])),!a)}if(_.isFormData(e)&&_.isFunction(e.entries)){const n={};return _.forEachEntry(e,(r,i)=>{t(rl(r),i,n,0)}),n}return null}function sl(e,t,n){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tr={transitional:Rs,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=_.isObject(t);if(s&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return i?JSON.stringify(Ls(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return nl(t,this.formSerializer).toString();if((a=_.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return kn(a?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),sl(t)):t}],transformResponse:[function(t){const n=this.transitional||Tr.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&_.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?q.from(a,q.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Me.classes.FormData,Blob:Me.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{Tr.headers[e]={}});const Rr=Tr,ol=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),al=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&ol[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},di=Symbol("internals");function pt(e){return e&&String(e).trim().toLowerCase()}function tn(e){return e===!1||e==null?e:_.isArray(e)?e.map(tn):String(e)}function ll(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const ul=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fn(e,t,n,r,i){if(_.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!_.isString(t)){if(_.isString(r))return t.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(t)}}function cl(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function fl(e,t){const n=_.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}class Sn{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,u,l){const c=pt(u);if(!c)throw new Error("header name must be a non-empty string");const f=_.findKey(i,c);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||u]=tn(a))}const o=(a,u)=>_.forEach(a,(l,c)=>s(l,c,u));return _.isPlainObject(t)||t instanceof this.constructor?o(t,n):_.isString(t)&&(t=t.trim())&&!ul(t)?o(al(t),n):t!=null&&s(n,t,r),this}get(t,n){if(t=pt(t),t){const r=_.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return ll(i);if(_.isFunction(n))return n.call(this,i,r);if(_.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=pt(t),t){const r=_.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Fn(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=pt(o),o){const a=_.findKey(r,o);a&&(!n||Fn(r,r[a],a,n))&&(delete r[a],i=!0)}}return _.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Fn(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return _.forEach(this,(i,s)=>{const o=_.findKey(r,s);if(o){n[o]=tn(i),delete n[s];return}const a=t?cl(s):String(s).trim();a!==s&&delete n[s],n[a]=tn(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return _.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[di]=this[di]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=pt(o);r[a]||(fl(i,o),r[a]=!0)}return _.isArray(t)?t.forEach(s):s(t),this}}Sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Sn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});_.freezeMethods(Sn);const ze=Sn;function Dn(e,t){const n=this||Rr,r=t||n,i=ze.from(r.headers);let s=r.data;return _.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Ps(e){return!!(e&&e.__CANCEL__)}function Nt(e,t,n){q.call(this,e??"canceled",q.ERR_CANCELED,t,n),this.name="CanceledError"}_.inherits(Nt,q,{__CANCEL__:!0});function hl(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new q("Request failed with status code "+n.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const dl=Me.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];_.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),_.isString(r)&&o.push("path="+r),_.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pl(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ml(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ns(e,t){return e&&!pl(t)?ml(e,t):t}const gl=Me.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=_.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function yl(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function wl(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(u){const l=Date.now(),c=r[s];o||(o=l),n[i]=u,r[i]=l;let f=s,m=0;for(;f!==i;)m+=n[f++],f=f%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const p=c&&l-c;return p?Math.round(m*1e3/p):void 0}}function pi(e,t){let n=0;const r=wl(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,u=r(a),l=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&l?(o-s)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const bl=typeof XMLHttpRequest<"u",_l=bl&&function(e){return new Promise(function(n,r){let i=e.data;const s=ze.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}let c;if(_.isFormData(i)){if(Me.hasStandardBrowserEnv||Me.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[w,...E]=c?c.split(";").map(y=>y.trim()).filter(Boolean):[];s.setContentType([w||"multipart/form-data",...E].join("; "))}}let f=new XMLHttpRequest;if(e.auth){const w=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(w+":"+E))}const m=Ns(e.baseURL,e.url);f.open(e.method.toUpperCase(),Ts(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function p(){if(!f)return;const w=ze.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:w,config:e,request:f};hl(function(k){n(k),l()},function(k){r(k),l()},y),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(r(new q("Request aborted",q.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new q("Network Error",q.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let E=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||Rs;e.timeoutErrorMessage&&(E=e.timeoutErrorMessage),r(new q(E,y.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,e,f)),f=null},Me.hasStandardBrowserEnv&&(a&&_.isFunction(a)&&(a=a(e)),a||a!==!1&&gl(m))){const w=e.xsrfHeaderName&&e.xsrfCookieName&&dl.read(e.xsrfCookieName);w&&s.set(e.xsrfHeaderName,w)}i===void 0&&s.setContentType(null),"setRequestHeader"in f&&_.forEach(s.toJSON(),function(E,y){f.setRequestHeader(y,E)}),_.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),o&&o!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",pi(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",pi(e.onUploadProgress)),(e.cancelToken||e.signal)&&(u=w=>{f&&(r(!w||w.type?new Nt(null,e,f):w),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u)));const g=yl(m);if(g&&Me.protocols.indexOf(g)===-1){r(new q("Unsupported protocol "+g+":",q.ERR_BAD_REQUEST,e));return}f.send(i||null)})},Qn={http:Ha,xhr:_l};_.forEach(Qn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mi=e=>`- ${e}`,xl=e=>_.isFunction(e)||e===null||e===!1,Ms={getAdapter:e=>{e=_.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!xl(n)&&(r=Qn[(o=String(n)).toLowerCase()],r===void 0))throw new q(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(mi).join(`
`):" "+mi(s[0]):"as no adapter specified";throw new q("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Qn};function Bn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nt(null,e)}function gi(e){return Bn(e),e.headers=ze.from(e.headers),e.data=Dn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ms.getAdapter(e.adapter||Rr.adapter)(e).then(function(r){return Bn(e),r.data=Dn.call(e,e.transformResponse,r),r.headers=ze.from(r.headers),r},function(r){return Ps(r)||(Bn(e),r&&r.response&&(r.response.data=Dn.call(e,e.transformResponse,r.response),r.response.headers=ze.from(r.response.headers))),Promise.reject(r)})}const yi=e=>e instanceof ze?{...e}:e;function it(e,t){t=t||{};const n={};function r(l,c,f){return _.isPlainObject(l)&&_.isPlainObject(c)?_.merge.call({caseless:f},l,c):_.isPlainObject(c)?_.merge({},c):_.isArray(c)?c.slice():c}function i(l,c,f){if(_.isUndefined(c)){if(!_.isUndefined(l))return r(void 0,l,f)}else return r(l,c,f)}function s(l,c){if(!_.isUndefined(c))return r(void 0,c)}function o(l,c){if(_.isUndefined(c)){if(!_.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function a(l,c,f){if(f in t)return r(l,c);if(f in e)return r(void 0,l)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,c)=>i(yi(l),yi(c),!0)};return _.forEach(Object.keys(Object.assign({},e,t)),function(c){const f=u[c]||i,m=f(e[c],t[c],c);_.isUndefined(m)&&f!==a||(n[c]=m)}),n}const Fs="1.6.8",Ir={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ir[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const wi={};Ir.transitional=function(t,n,r){function i(s,o){return"[Axios v"+Fs+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new q(i(o," has been removed"+(n?" in "+n:"")),q.ERR_DEPRECATED);return n&&!wi[o]&&(wi[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};function kl(e,t,n){if(typeof e!="object")throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const a=e[s],u=a===void 0||o(a,s,e);if(u!==!0)throw new q("option "+s+" must be "+u,q.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new q("Unknown option "+s,q.ERR_BAD_OPTION)}}const Xn={assertOptions:kl,validators:Ir},We=Xn.validators;class fn{constructor(t){this.defaults=t,this.interceptors={request:new hi,response:new hi}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=it(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Xn.assertOptions(r,{silentJSONParsing:We.transitional(We.boolean),forcedJSONParsing:We.transitional(We.boolean),clarifyTimeoutError:We.transitional(We.boolean)},!1),i!=null&&(_.isFunction(i)?n.paramsSerializer={serialize:i}:Xn.assertOptions(i,{encode:We.function,serialize:We.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&_.merge(s.common,s[n.method]);s&&_.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=ze.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const l=[];this.interceptors.response.forEach(function(w){l.push(w.fulfilled,w.rejected)});let c,f=0,m;if(!u){const g=[gi.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),m=g.length,c=Promise.resolve(n);f<m;)c=c.then(g[f++],g[f++]);return c}m=a.length;let p=n;for(f=0;f<m;){const g=a[f++],w=a[f++];try{p=g(p)}catch(E){w.call(this,E);break}}try{c=gi.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,m=l.length;f<m;)c=c.then(l[f++],l[f++]);return c}getUri(t){t=it(this.defaults,t);const n=Ns(t.baseURL,t.url);return Ts(n,t.params,t.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(t){fn.prototype[t]=function(n,r){return this.request(it(r||{},{method:t,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(it(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}fn.prototype[t]=n(),fn.prototype[t+"Form"]=n(!0)});const nn=fn;class Lr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new Nt(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Lr(function(i){t=i}),cancel:t}}}const Sl=Lr;function El(e){return function(n){return e.apply(null,n)}}function Al(e){return _.isObject(e)&&e.isAxiosError===!0}const Zn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zn).forEach(([e,t])=>{Zn[t]=e});const Cl=Zn;function Ds(e){const t=new nn(e),n=ys(nn.prototype.request,t);return _.extend(n,nn.prototype,t,{allOwnKeys:!0}),_.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Ds(it(e,i))},n}const te=Ds(Rr);te.Axios=nn;te.CanceledError=Nt;te.CancelToken=Sl;te.isCancel=Ps;te.VERSION=Fs;te.toFormData=kn;te.AxiosError=q;te.Cancel=te.CanceledError;te.all=function(t){return Promise.all(t)};te.spread=El;te.isAxiosError=Al;te.mergeConfig=it;te.AxiosHeaders=ze;te.formToJSON=e=>Ls(_.isHTMLForm(e)?new FormData(e):e);te.getAdapter=Ms.getAdapter;te.HttpStatusCode=Cl;te.default=te;const Ol=(e,t)=>e===t,hn=Symbol("solid-proxy"),vl=Symbol("solid-track"),dn={equals:Ol};let Et=null,Bs=js;const je=1,pn=2,zs={owned:null,cleanups:null,context:null,owner:null};var G=null;let zn=null,Tl=null,ie=null,de=null,Re=null,En=0;function rn(e,t){const n=ie,r=G,i=e.length===0,s=t===void 0?r:t,o=i?zs:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?e:()=>e(()=>Ae(()=>On(o)));G=o,ie=null;try{return zt(a,!0)}finally{ie=n,G=r}}function ue(e,t){t=t?Object.assign({},dn,t):dn;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Us(n,i));return[$s.bind(n),r]}function Ie(e,t,n){const r=Cn(e,t,!1,je);Bt(r)}function An(e,t,n){Bs=Nl;const r=Cn(e,t,!1,je);(!n||!n.render)&&(r.user=!0),Re?Re.push(r):Bt(r)}function we(e,t,n){n=n?Object.assign({},dn,n):dn;const r=Cn(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Bt(r),$s.bind(r)}function Ae(e){if(ie===null)return e();const t=ie;ie=null;try{return e()}finally{ie=t}}function Ge(e){An(()=>Ae(e))}function Mt(e){return G===null||(G.cleanups===null?G.cleanups=[e]:G.cleanups.push(e)),e}function Rl(e,t){Et||(Et=Symbol("error")),G=Cn(void 0,void 0,!0),G.context={...G.context,[Et]:[t]};try{return e()}catch(n){vn(n)}finally{G=G.owner}}function Ft(e,t){const n=Symbol("context");return{id:n,Provider:Fl(n),defaultValue:e}}function Dt(e){return G&&G.context&&G.context[e.id]!==void 0?G.context[e.id]:e.defaultValue}function Il(e){const t=we(e),n=we(()=>er(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function $s(){if(this.sources&&this.state)if(this.state===je)Bt(this);else{const e=de;de=null,zt(()=>gn(this),!1),de=e}if(ie){const e=this.observers?this.observers.length:0;ie.sources?(ie.sources.push(this),ie.sourceSlots.push(e)):(ie.sources=[this],ie.sourceSlots=[e]),this.observers?(this.observers.push(ie),this.observerSlots.push(ie.sources.length-1)):(this.observers=[ie],this.observerSlots=[ie.sources.length-1])}return this.value}function Us(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&zt(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],o=zn&&zn.running;o&&zn.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?de.push(s):Re.push(s),s.observers&&Ws(s)),o||(s.state=je)}if(de.length>1e6)throw de=[],new Error},!1)),t}function Bt(e){if(!e.fn)return;On(e);const t=En;Ll(e,e.value,t)}function Ll(e,t,n){let r;const i=G,s=ie;ie=G=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=je,e.owned&&e.owned.forEach(On),e.owned=null),e.updatedAt=n+1,vn(o)}finally{ie=s,G=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Us(e,r):e.value=r,e.updatedAt=n)}function Cn(e,t,n,r=je,i){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:G,context:G?G.context:null,pure:n};return G===null||G!==zs&&(G.owned?G.owned.push(s):G.owned=[s]),s}function mn(e){if(e.state===0)return;if(e.state===pn)return gn(e);if(e.suspense&&Ae(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<En);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===je)Bt(e);else if(e.state===pn){const r=de;de=null,zt(()=>gn(e,t[0]),!1),de=r}}function zt(e,t){if(de)return e();let n=!1;t||(de=[]),Re?n=!0:Re=[],En++;try{const r=e();return Pl(n),r}catch(r){n||(Re=null),de=null,vn(r)}}function Pl(e){if(de&&(js(de),de=null),e)return;const t=Re;Re=null,t.length&&zt(()=>Bs(t),!1)}function js(e){for(let t=0;t<e.length;t++)mn(e[t])}function Nl(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:mn(r)}for(t=0;t<n;t++)mn(e[t])}function gn(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===je?r!==t&&(!r.updatedAt||r.updatedAt<En)&&mn(r):i===pn&&gn(r,t)}}}function Ws(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=pn,n.pure?de.push(n):Re.push(n),n.observers&&Ws(n))}}function On(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),o=n.observerSlots.pop();r<i.length&&(s.sourceSlots[o]=r,i[r]=s,n.observerSlots[r]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)On(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ml(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function bi(e,t,n){try{for(const r of t)r(e)}catch(r){vn(r,n&&n.owner||null)}}function vn(e,t=G){const n=Et&&t&&t.context&&t.context[Et],r=Ml(e);if(!n)throw r;Re?Re.push({fn(){bi(r,n,t)},state:je}):bi(r,n,t)}function er(e){if(typeof e=="function"&&!e.length)return er(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=er(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Fl(e,t){return function(r){let i;return Ie(()=>i=Ae(()=>(G.context={...G.context,[e]:r.value},Il(()=>r.children))),void 0),i}}const Dl=Symbol("fallback");function _i(e){for(let t=0;t<e.length;t++)e[t]()}function Bl(e,t,n={}){let r=[],i=[],s=[],o=0,a=t.length>1?[]:null;return Mt(()=>_i(s)),()=>{let u=e()||[],l,c;return u[vl],Ae(()=>{let m=u.length,p,g,w,E,y,b,k,P,T;if(m===0)o!==0&&(_i(s),s=[],r=[],i=[],o=0,a&&(a=[])),n.fallback&&(r=[Dl],i[0]=rn(x=>(s[0]=x,n.fallback())),o=1);else if(o===0){for(i=new Array(m),c=0;c<m;c++)r[c]=u[c],i[c]=rn(f);o=m}else{for(w=new Array(m),E=new Array(m),a&&(y=new Array(m)),b=0,k=Math.min(o,m);b<k&&r[b]===u[b];b++);for(k=o-1,P=m-1;k>=b&&P>=b&&r[k]===u[P];k--,P--)w[P]=i[k],E[P]=s[k],a&&(y[P]=a[k]);for(p=new Map,g=new Array(P+1),c=P;c>=b;c--)T=u[c],l=p.get(T),g[c]=l===void 0?-1:l,p.set(T,c);for(l=b;l<=k;l++)T=r[l],c=p.get(T),c!==void 0&&c!==-1?(w[c]=i[l],E[c]=s[l],a&&(y[c]=a[l]),c=g[c],p.set(T,c)):s[l]();for(c=b;c<m;c++)c in w?(i[c]=w[c],s[c]=E[c],a&&(a[c]=y[c],a[c](c))):i[c]=rn(f);i=i.slice(0,o=m),r=u.slice(0)}return i});function f(m){if(s[c]=m,a){const[p,g]=ue(c);return a[c]=g,t(u[c],p)}return t(u[c])}}}function Q(e,t){return Ae(()=>e(t||{}))}function jt(){return!0}const tr={get(e,t,n){return t===hn?n:e.get(t)},has(e,t){return t===hn?!0:e.has(t)},set:jt,deleteProperty:jt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:jt,deleteProperty:jt}},ownKeys(e){return e.keys()}};function $n(e){return(e=typeof e=="function"?e():e)?e:{}}function zl(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function yn(...e){let t=!1;for(let o=0;o<e.length;o++){const a=e[o];t=t||!!a&&hn in a,e[o]=typeof a=="function"?(t=!0,we(a)):a}if(t)return new Proxy({get(o){for(let a=e.length-1;a>=0;a--){const u=$n(e[a])[o];if(u!==void 0)return u}},has(o){for(let a=e.length-1;a>=0;a--)if(o in $n(e[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<e.length;a++)o.push(...Object.keys($n(e[a])));return[...new Set(o)]}},tr);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const a=e[o];if(!a)continue;const u=Object.getOwnPropertyNames(a);for(let l=u.length-1;l>=0;l--){const c=u[l];if(c==="__proto__"||c==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,c);if(!r[c])r[c]=f.get?{enumerable:!0,configurable:!0,get:zl.bind(n[c]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const m=n[c];m&&(f.get?m.push(f.get.bind(a)):f.value!==void 0&&m.push(()=>f.value))}}}const i={},s=Object.keys(r);for(let o=s.length-1;o>=0;o--){const a=s[o],u=r[a];u&&u.get?Object.defineProperty(i,a,u):i[a]=u?u.value:void 0}return i}function qs(e,...t){if(hn in e){const i=new Set(t.length>1?t.flat():t[0]),s=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},tr));return s.push(new Proxy({get(o){return i.has(o)?void 0:e[o]},has(o){return i.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!i.has(o))}},tr)),s}const n={},r=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,i),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,u=0;for(const l of t)l.includes(i)&&(a=!0,o?r[u][i]=s.value:Object.defineProperty(r[u],i,s)),++u;a||(o?n[i]=s.value:Object.defineProperty(n,i,s))}return[...r,n]}const $l=e=>`Stale read from <${e}>.`;function Ul(e){const t="fallback"in e&&{fallback:()=>e.fallback};return we(Bl(()=>e.each,e.children,t||void 0))}function st(e){const t=e.keyed,n=we(()=>e.when,void 0,{equals:(r,i)=>t?r===i:!r==!i});return we(()=>{const r=n();if(r){const i=e.children;return typeof i=="function"&&i.length>0?Ae(()=>i(t?r:()=>{if(!Ae(n))throw $l("Show");return e.when})):i}return e.fallback},void 0,void 0)}let Wt;function jl(e){let t;const[n,r]=ue(t,void 0);return Wt||(Wt=new Set),Wt.add(r),Mt(()=>Wt.delete(r)),we(()=>{let i;if(i=n()){const s=e.fallback;return typeof s=="function"&&s.length?Ae(()=>s(i,()=>r())):s}return Rl(()=>e.children,r)},void 0,void 0)}const Wl=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],ql=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Wl]),Hl=new Set(["innerHTML","textContent","innerText","children"]),Vl=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Kl=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Gl(e,t){const n=Kl[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Yl=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Jl=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Ql={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Xl(e,t,n){let r=n.length,i=t.length,s=r,o=0,a=0,u=t[i-1].nextSibling,l=null;for(;o<i||a<s;){if(t[o]===n[a]){o++,a++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===o){const c=s<r?a?n[a-1].nextSibling:n[s-a]:u;for(;a<s;)e.insertBefore(n[a++],c)}else if(s===a)for(;o<i;)(!l||!l.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[s-1]&&n[a]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--s],c),t[i]=n[s]}else{if(!l){l=new Map;let f=a;for(;f<s;)l.set(n[f],f++)}const c=l.get(t[o]);if(c!=null)if(a<c&&c<s){let f=o,m=1,p;for(;++f<i&&f<s&&!((p=l.get(t[f]))==null||p!==c+m);)m++;if(m>c-a){const g=t[o];for(;a<c;)e.insertBefore(n[a++],g)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}}const xi="_$DX_DELEGATE";function Zl(e,t,n,r={}){let i;return rn(s=>{i=s,t===document?e():le(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function oe(e,t,n){let r;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,n?o.content.firstChild.firstChild:o.content.firstChild},s=t?()=>Ae(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return s.cloneNode=s,s}function ut(e,t=window.document){const n=t[xi]||(t[xi]=new Set);for(let r=0,i=e.length;r<i;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,ou))}}function wn(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function eu(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function tu(e,t){t==null?e.removeAttribute("class"):e.className=t}function Hs(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=s=>i.call(e,n[1],s))}else e.addEventListener(t,n)}function nu(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let s,o;for(s=0,o=i.length;s<o;s++){const a=i[s];!a||a==="undefined"||t[a]||(ki(e,a,!1),delete n[a])}for(s=0,o=r.length;s<o;s++){const a=r[s],u=!!t[a];!a||a==="undefined"||n[a]===u||!u||(ki(e,a,!0),n[a]=u)}return n}function ru(e,t,n){if(!t)return n?wn(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function Vs(e,t={},n,r){const i={};return r||Ie(()=>i.children=ot(e,t.children,i.children)),Ie(()=>typeof t.ref=="function"?Ye(t.ref,e):t.ref=e),Ie(()=>iu(e,t,n,!0,i,!0)),i}function Ye(e,t,n){return Ae(()=>e(t,n))}function le(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return ot(e,t,r,n);Ie(i=>ot(e,t(),i,n),r)}function iu(e,t,n,r,i={},s=!1){t||(t={});for(const o in i)if(!(o in t)){if(o==="children")continue;i[o]=Si(e,o,null,i[o],n,s)}for(const o in t){if(o==="children"){r||ot(e,t.children);continue}const a=t[o];i[o]=Si(e,o,a,i[o],n,s)}}function su(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function ki(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)e.classList.toggle(r[i],n)}function Si(e,t,n,r,i,s){let o,a,u,l,c;if(t==="style")return ru(e,n,r);if(t==="classList")return nu(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r),n&&e.addEventListener(f,n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),m=Yl.has(f);if(!m&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(f,p)}(m||n)&&(Hs(e,f,n,m),m&&ut([f]))}else if(t.slice(0,5)==="attr:")wn(e,t.slice(5),n);else if((c=t.slice(0,5)==="prop:")||(u=Hl.has(t))||!i&&((l=Gl(t,e.tagName))||(a=ql.has(t)))||(o=e.nodeName.includes("-")))c&&(t=t.slice(5),a=!0),t==="class"||t==="className"?tu(e,n):o&&!a&&!u?e[su(t)]=n:e[l||t]=n;else{const f=i&&t.indexOf(":")>-1&&Ql[t.split(":")[0]];f?eu(e,f,t,n):wn(e,Vl[t]||t,n)}return n}function ou(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function ot(e,t,n,r,i){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),o){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=et(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=et(e,n,r);else{if(s==="function")return Ie(()=>{let a=t();for(;typeof a=="function";)a=a();n=ot(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],u=n&&Array.isArray(n);if(nr(a,t,n,i))return Ie(()=>n=ot(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=et(e,n,r),o)return n}else u?n.length===0?Ei(e,a,r):Xl(e,n,a):(n&&et(e),Ei(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=et(e,n,r,t);et(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function nr(e,t,n,r){let i=!1;for(let s=0,o=t.length;s<o;s++){let a=t[s],u=n&&n[e.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))i=nr(e,a,u)||i;else if(l==="function")if(r){for(;typeof a=="function";)a=a();i=nr(e,Array.isArray(a)?a:[a],Array.isArray(u)?u:[u])||i}else e.push(a),i=!0;else{const c=String(a);u&&u.nodeType===3&&u.data===c?e.push(u):e.push(document.createTextNode(c))}}return i}function Ei(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function et(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(i!==a){const u=a.parentNode===e;!s&&!o?u?e.replaceChild(i,a):e.insertBefore(i,n):u&&a.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}const au=!1,lu="http://www.w3.org/2000/svg";function uu(e,t=!1){return t?document.createElementNS(lu,e):document.createElement(e)}function cu(e){const[t,n]=qs(e,["component"]),r=we(()=>t.component);return we(()=>{const i=r();switch(typeof i){case"function":return Ae(()=>i(n));case"string":const s=Jl.has(i),o=uu(i,s);return Vs(o,n,s),o}})}var fu={exports:{}};(function(e){var t=function(n){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(S,h,C){S[h]=C.value},o,a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function f(S,h,C){return Object.defineProperty(S,h,{value:C,enumerable:!0,configurable:!0,writable:!0}),S[h]}try{f({},"")}catch{f=function(h,C,M){return h[C]=M}}function m(S,h,C,M){var d=h&&h.prototype instanceof k?h:k,v=Object.create(d.prototype),$=new re(M||[]);return s(v,"_invoke",{value:L(S,C,$)}),v}n.wrap=m;function p(S,h,C){try{return{type:"normal",arg:S.call(h,C)}}catch(M){return{type:"throw",arg:M}}}var g="suspendedStart",w="suspendedYield",E="executing",y="completed",b={};function k(){}function P(){}function T(){}var x={};f(x,u,function(){return this});var U=Object.getPrototypeOf,Y=U&&U(U(ee([])));Y&&Y!==r&&i.call(Y,u)&&(x=Y);var J=T.prototype=k.prototype=Object.create(x);P.prototype=T,s(J,"constructor",{value:T,configurable:!0}),s(T,"constructor",{value:P,configurable:!0}),P.displayName=f(T,c,"GeneratorFunction");function ne(S){["next","throw","return"].forEach(function(h){f(S,h,function(C){return this._invoke(h,C)})})}n.isGeneratorFunction=function(S){var h=typeof S=="function"&&S.constructor;return h?h===P||(h.displayName||h.name)==="GeneratorFunction":!1},n.mark=function(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,T):(S.__proto__=T,f(S,c,"GeneratorFunction")),S.prototype=Object.create(J),S},n.awrap=function(S){return{__await:S}};function R(S,h){function C(v,$,F,W){var H=p(S[v],S,$);if(H.type==="throw")W(H.arg);else{var Ce=H.arg,fe=Ce.value;return fe&&typeof fe=="object"&&i.call(fe,"__await")?h.resolve(fe.__await).then(function(be){C("next",be,F,W)},function(be){C("throw",be,F,W)}):h.resolve(fe).then(function(be){Ce.value=be,F(Ce)},function(be){return C("throw",be,F,W)})}}var M;function d(v,$){function F(){return new h(function(W,H){C(v,$,W,H)})}return M=M?M.then(F,F):F()}s(this,"_invoke",{value:d})}ne(R.prototype),f(R.prototype,l,function(){return this}),n.AsyncIterator=R,n.async=function(S,h,C,M,d){d===void 0&&(d=Promise);var v=new R(m(S,h,C,M),d);return n.isGeneratorFunction(h)?v:v.next().then(function($){return $.done?$.value:v.next()})};function L(S,h,C){var M=g;return function(v,$){if(M===E)throw new Error("Generator is already running");if(M===y){if(v==="throw")throw $;return ce()}for(C.method=v,C.arg=$;;){var F=C.delegate;if(F){var W=K(F,C);if(W){if(W===b)continue;return W}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(M===g)throw M=y,C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);M=E;var H=p(S,h,C);if(H.type==="normal"){if(M=C.done?y:w,H.arg===b)continue;return{value:H.arg,done:C.done}}else H.type==="throw"&&(M=y,C.method="throw",C.arg=H.arg)}}}function K(S,h){var C=h.method,M=S.iterator[C];if(M===o)return h.delegate=null,C==="throw"&&S.iterator.return&&(h.method="return",h.arg=o,K(S,h),h.method==="throw")||C!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+C+"' method")),b;var d=p(M,S.iterator,h.arg);if(d.type==="throw")return h.method="throw",h.arg=d.arg,h.delegate=null,b;var v=d.arg;if(!v)return h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,b;if(v.done)h[S.resultName]=v.value,h.next=S.nextLoc,h.method!=="return"&&(h.method="next",h.arg=o);else return v;return h.delegate=null,b}ne(J),f(J,c,"Generator"),f(J,u,function(){return this}),f(J,"toString",function(){return"[object Generator]"});function X(S){var h={tryLoc:S[0]};1 in S&&(h.catchLoc=S[1]),2 in S&&(h.finallyLoc=S[2],h.afterLoc=S[3]),this.tryEntries.push(h)}function B(S){var h=S.completion||{};h.type="normal",delete h.arg,S.completion=h}function re(S){this.tryEntries=[{tryLoc:"root"}],S.forEach(X,this),this.reset(!0)}n.keys=function(S){var h=Object(S),C=[];for(var M in h)C.push(M);return C.reverse(),function d(){for(;C.length;){var v=C.pop();if(v in h)return d.value=v,d.done=!1,d}return d.done=!0,d}};function ee(S){if(S){var h=S[u];if(h)return h.call(S);if(typeof S.next=="function")return S;if(!isNaN(S.length)){var C=-1,M=function d(){for(;++C<S.length;)if(i.call(S,C))return d.value=S[C],d.done=!1,d;return d.value=o,d.done=!0,d};return M.next=M}}return{next:ce}}n.values=ee;function ce(){return{value:o,done:!0}}return re.prototype={constructor:re,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(B),!S)for(var h in this)h.charAt(0)==="t"&&i.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=o)},stop:function(){this.done=!0;var S=this.tryEntries[0],h=S.completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var h=this;function C(W,H){return v.type="throw",v.arg=S,h.next=W,H&&(h.method="next",h.arg=o),!!H}for(var M=this.tryEntries.length-1;M>=0;--M){var d=this.tryEntries[M],v=d.completion;if(d.tryLoc==="root")return C("end");if(d.tryLoc<=this.prev){var $=i.call(d,"catchLoc"),F=i.call(d,"finallyLoc");if($&&F){if(this.prev<d.catchLoc)return C(d.catchLoc,!0);if(this.prev<d.finallyLoc)return C(d.finallyLoc)}else if($){if(this.prev<d.catchLoc)return C(d.catchLoc,!0)}else if(F){if(this.prev<d.finallyLoc)return C(d.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(S,h){for(var C=this.tryEntries.length-1;C>=0;--C){var M=this.tryEntries[C];if(M.tryLoc<=this.prev&&i.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var d=M;break}}d&&(S==="break"||S==="continue")&&d.tryLoc<=h&&h<=d.finallyLoc&&(d=null);var v=d?d.completion:{};return v.type=S,v.arg=h,d?(this.method="next",this.next=d.finallyLoc,b):this.complete(v)},complete:function(S,h){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&h&&(this.next=h),b},finish:function(S){for(var h=this.tryEntries.length-1;h>=0;--h){var C=this.tryEntries[h];if(C.finallyLoc===S)return this.complete(C.completion,C.afterLoc),B(C),b}},catch:function(S){for(var h=this.tryEntries.length-1;h>=0;--h){var C=this.tryEntries[h];if(C.tryLoc===S){var M=C.completion;if(M.type==="throw"){var d=M.arg;B(C)}return d}}throw new Error("illegal catch attempt")},delegateYield:function(S,h,C){return this.delegate={iterator:ee(S),resultName:h,nextLoc:C},this.method==="next"&&(this.arg=o),b}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(fu);var Pr=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const hu=Pr;let Ai=0;var Ks=({id:e,action:t,payload:n={}})=>{let r=e;return typeof r>"u"&&(r=hu("Job",Ai),Ai+=1),{id:r,action:t,payload:n}},ct={};let Nr=!1;ct.logging=Nr;ct.setLogging=e=>{Nr=e};ct.log=(...e)=>Nr?console.log.apply(void 0,e):null;const du=Ks,{log:qt}=ct,pu=Pr;let Ci=0;var mu=()=>{const e=pu("Scheduler",Ci),t={},n={};let r=[];Ci+=1;const i=()=>r.length,s=()=>Object.keys(t).length,o=()=>{if(r.length!==0){const f=Object.keys(t);for(let m=0;m<f.length;m+=1)if(typeof n[f[m]]>"u"){r[0](t[f[m]]);break}}},a=(f,m)=>new Promise((p,g)=>{const w=du({action:f,payload:m});r.push(async E=>{r.shift(),n[E.id]=w;try{p(await E[f].apply(void 0,[...m,w.id]))}catch(y){g(y)}finally{delete n[E.id],o()}}),qt(`[${e}]: Add ${w.id} to JobQueue`),qt(`[${e}]: JobQueue length=${r.length}`),o()});return{addWorker:f=>(t[f.id]=f,qt(`[${e}]: Add ${f.id}`),qt(`[${e}]: Number of workers=${s()}`),o(),f.id),addJob:async(f,...m)=>{if(s()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return a(f,m)},terminate:async()=>{Object.keys(t).forEach(async f=>{await t[f].terminate()}),r=[]},getQueueLen:i,getNumWorkers:s}};function gu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function yu(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var wu=yu;const bu=wu;var _u=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":bu()?t.type="electron":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof gu=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const xu=_u("type")==="browser",ku=xu?e=>new URL(e,window.location.href).href:e=>e;var Su=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(n=>{e[n]&&(t[n]=ku(t[n]))}),t},Eu=e=>{const t=[],n=[],r=[],i=[],s=[];return e.blocks&&e.blocks.forEach(o=>{o.paragraphs.forEach(a=>{a.lines.forEach(u=>{u.words.forEach(l=>{l.symbols.forEach(c=>{s.push({...c,page:e,block:o,paragraph:a,line:u,word:l})}),i.push({...l,page:e,block:o,paragraph:a,line:u})}),r.push({...u,page:e,block:o,paragraph:a})}),n.push({...a,page:e,block:o})}),t.push({...o,page:e})}),{...e,blocks:t,paragraphs:n,lines:r,words:i,symbols:s}},Gs={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Au="tesseract.js",Cu="5.0.2",Ou="Pure Javascript Multilingual OCR",vu="src/index.js",Tu="src/index.d.ts",Ru="dist/tesseract.min.js",Iu="dist/tesseract.min.js",Lu={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Pu={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Nu="",Mu=["jeromewu"],Fu="Apache-2.0",Du={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Bu={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},zu={"@rollup/pluginutils":"^5.0.2"},$u={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Uu={url:"https://github.com/naptha/tesseract.js/issues"},ju="https://github.com/naptha/tesseract.js",Wu={type:"opencollective",url:"https://opencollective.com/tesseractjs"},qu={name:Au,version:Cu,description:Ou,main:vu,types:Tu,unpkg:Ru,jsdelivr:Iu,scripts:Lu,browser:Pu,author:Nu,contributors:Mu,license:Fu,devDependencies:Du,dependencies:Bu,overrides:zu,repository:$u,bugs:Uu,homepage:ju,collective:Wu};var Hu={workerBlobURL:!0,logger:()=>{}};const{version:Vu}=qu,Ku=Hu;var Gu={...Ku,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Vu}/dist/worker.min.js`},Yu=({workerPath:e,workerBlobURL:t})=>{let n;if(Blob&&URL&&t){const r=new Blob([`importScripts("${e}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(e);return n},Ju=e=>{e.terminate()},Qu=(e,t)=>{e.onmessage=({data:n})=>{t(n)}},Xu=async(e,t)=>{e.postMessage(t)};const Un=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=({target:{error:{code:i}}})=>{n(Error(`File could not be read! Code=${i}`))},r.readAsArrayBuffer(e)}),rr=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(n=>n.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await rr(e.src)),e.tagName==="VIDEO"&&(t=await rr(e.poster)),e.tagName==="CANVAS"&&await new Promise(n=>{e.toBlob(async r=>{t=await Un(r),n()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();t=await Un(n)}else(e instanceof File||e instanceof Blob)&&(t=await Un(e));return new Uint8Array(t)};var Zu=rr;const ec=Gu,tc=Yu,nc=Ju,rc=Qu,ic=Xu,sc=Zu;var oc={defaultOptions:ec,spawnWorker:tc,terminateWorker:nc,onMessage:rc,send:ic,loadImage:sc};const ac=Su,lc=Eu,ve=Ks,{log:Oi}=ct,uc=Pr,Qe=Gs,{defaultOptions:cc,spawnWorker:fc,terminateWorker:hc,onMessage:dc,loadImage:vi,send:pc}=oc;let Ti=0;var Ys=async(e="eng",t=Qe.LSTM_ONLY,n={},r={})=>{const i=uc("Worker",Ti),{logger:s,errorHandler:o,...a}=ac({...cc,...n}),u={},l={},c=typeof e=="string"?e.split("+"):e;let f=t,m=r;const p=[Qe.DEFAULT,Qe.LSTM_ONLY].includes(t)&&!a.legacyCore;let g,w;const E=new Promise((d,v)=>{w=d,g=v}),y=d=>{g(d.message)};let b=fc(a);b.onerror=y,Ti+=1;const k=(d,v)=>{u[d]=v},P=(d,v)=>{l[d]=v},T=({id:d,action:v,payload:$})=>new Promise((F,W)=>{Oi(`[${i}]: Start ${d}, action=${v}`),k(v,F),P(v,W),pc(b,{workerId:i,jobId:d,action:v,payload:$})}),x=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),U=d=>T(ve({id:d,action:"load",payload:{options:{lstmOnly:p,corePath:a.corePath,logging:a.logging}}})),Y=(d,v,$)=>T(ve({id:$,action:"FS",payload:{method:"writeFile",args:[d,v]}})),J=(d,v)=>T(ve({id:v,action:"FS",payload:{method:"readFile",args:[d,{encoding:"utf8"}]}})),ne=(d,v)=>T(ve({id:v,action:"FS",payload:{method:"unlink",args:[d]}})),R=(d,v,$)=>T(ve({id:$,action:"FS",payload:{method:d,args:v}})),L=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),K=(d,v)=>T(ve({id:v,action:"loadLanguage",payload:{langs:d,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Qe.LSTM_ONLY,Qe.TESSERACT_LSTM_COMBINED].includes(f)&&!a.legacyLang}}})),X=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),B=(d,v,$,F)=>T(ve({id:F,action:"initialize",payload:{langs:d,oem:v,config:$}})),re=(d="eng",v,$,F)=>{if(p&&[Qe.TESSERACT_ONLY,Qe.TESSERACT_LSTM_COMBINED].includes(v))throw Error("Legacy model requested but code missing.");const W=v||f;f=W;const H=$||m;m=H;const fe=(typeof d=="string"?d.split("+"):d).filter(be=>!c.includes(be));return c.push(...fe),fe.length>0?K(fe,F).then(()=>B(d,W,H,F)):B(d,W,H,F)},ee=(d={},v)=>T(ve({id:v,action:"setParameters",payload:{params:d}})),ce=async(d,v={},$={blocks:!0,text:!0,hocr:!0,tsv:!0},F)=>T(ve({id:F,action:"recognize",payload:{image:await vi(d),options:v,output:$}})),S=(d="Tesseract OCR Result",v=!1,$)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),T(ve({id:$,action:"getPDF",payload:{title:d,textonly:v}}))),h=async(d,v)=>{if(p)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return T(ve({id:v,action:"detect",payload:{image:await vi(d)}}))},C=async()=>(b!==null&&(hc(b),b=null),Promise.resolve());dc(b,({workerId:d,jobId:v,status:$,action:F,data:W})=>{if($==="resolve"){Oi(`[${d}]: Complete ${v}`);let H=W;F==="recognize"?H=lc(W):F==="getPDF"&&(H=Array.from({...W,length:Object.keys(W).length})),u[F]({jobId:v,data:H})}else if($==="reject")if(l[F](W),F==="load"&&g(W),o)o(W);else throw Error(W);else $==="progress"&&s({...W,userJobId:v})});const M={id:i,worker:b,setResolve:k,setReject:P,load:x,writeText:Y,readText:J,removeFile:ne,FS:R,loadLanguage:L,initialize:X,reinitialize:re,setParameters:ee,recognize:ce,getPDF:S,detect:h,terminate:C};return U().then(()=>K(e)).then(()=>B(e,t,r)).then(()=>w(M)).catch(()=>{}),E};const Js=Ys,mc=async(e,t,n)=>{const r=await Js(t,1,n);return r.recognize(e).finally(async()=>{await r.terminate()})},gc=async(e,t)=>{const n=await Js("osd",0,t);return n.detect(e).finally(async()=>{await n.terminate()})};var yc={recognize:mc,detect:gc},wc={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},bc={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const _c=mu,xc=Ys,kc=yc,Sc=wc,Ec=Gs,Ac=bc,{setLogging:Cc}=ct;var Oc={languages:Sc,OEM:Ec,PSM:Ac,createScheduler:_c,createWorker:xc,setLogging:Cc,...kc};const vc=oe("<svg stroke-width=0>");function Tn(e,t){const n=yn(e.a,t),[r,i]=qs(n,["src"]),[s,o]=ue(""),a=we(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return An(()=>o(a())),Mt(()=>{o("")}),(()=>{const u=vc();return Vs(u,yn({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},i,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return s()}}),!0,!0),le(u,()=>au),u})()}function Tc(e){return Tn({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"/>'},e)}function Rc(e){return Tn({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4.5v15m7.5-7.5h-15"/>'},e)}function Ic(e){return Tn({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path fill="currentColor" fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"/>'},e)}function Lc(e){return Tn({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path fill="currentColor" d="M11.625 16.5a1.875 1.875 0 1 0 0-3.75 1.875 1.875 0 0 0 0 3.75Z"/><path fill="currentColor" fill-rule="evenodd" d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6 16.5c.66 0 1.277-.19 1.797-.518l1.048 1.048a.75.75 0 0 0 1.06-1.06l-1.047-1.048A3.375 3.375 0 1 0 11.625 18Z" clip-rule="evenodd"/><path fill="currentColor" d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"/>'},e)}class ae{x;y;constructor(t,n){this.x=t,this.y=n}add(t){return new ae(this.x+t.x,this.y+t.y)}sub(t){return new ae(this.x-t.x,this.y-t.y)}mul(t){return new ae(this.x*t,this.y*t)}div(t){return new ae(this.x/t,this.y/t)}neg(){return new ae(-this.x,-this.y)}}function Pc(e,t,n){return e.sub(t).mul(n)}function vt(e,t,n){return e.div(n).add(t)}function Nc(e,t,n,r){const i=vt(e,t,n);return t.sub(i).div(r).add(i)}function Mc(e,t,n,r){const i=vt(e,t,n);return t.sub(i).mul(r).add(i)}function Fc(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function ir(e,t=!1){const n=Fc(),r=`_${n}`;return Object.defineProperty(window,r,{value:i=>(t&&Reflect.deleteProperty(window,r),e?.(i)),writable:!1,configurable:!0}),n}async function Qs(e,t={}){return new Promise((n,r)=>{const i=ir(o=>{n(o),Reflect.deleteProperty(window,`_${s}`)},!0),s=ir(o=>{r(o),Reflect.deleteProperty(window,`_${i}`)},!0);window.__TAURI_IPC__({cmd:e,callback:i,error:s,...t})})}async function N(e){return Qs("tauri",e)}async function Xs(e,t){return N({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function Dc(e,t,n){await N({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function Zs(e,t,n){return N({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:ir(n)}}).then(r=>async()=>Xs(e,r))}async function Bc(e,t,n){return Zs(e,t,r=>{n(r),Xs(e,r.id).catch(()=>{})})}var _e;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(_e||(_e={}));var Ri;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Desktop=6]="Desktop",e[e.Document=7]="Document",e[e.Download=8]="Download",e[e.Executable=9]="Executable",e[e.Font=10]="Font",e[e.Home=11]="Home",e[e.Picture=12]="Picture",e[e.Public=13]="Public",e[e.Runtime=14]="Runtime",e[e.Template=15]="Template",e[e.Video=16]="Video",e[e.Resource=17]="Resource",e[e.App=18]="App",e[e.Log=19]="Log",e[e.Temp=20]="Temp",e[e.AppConfig=21]="AppConfig",e[e.AppData=22]="AppData",e[e.AppLocalData=23]="AppLocalData",e[e.AppCache=24]="AppCache",e[e.AppLog=25]="AppLog"})(Ri||(Ri={}));var Ii;(function(e){e[e.JSON=1]="JSON",e[e.Text=2]="Text",e[e.Binary=3]="Binary"})(Ii||(Ii={}));function Mr(){return navigator.appVersion.includes("Win")}Mr();Mr();class zc{constructor(t,n){this.type="Logical",this.width=t,this.height=n}}class sr{constructor(t,n){this.type="Physical",this.width=t,this.height=n}toLogical(t){return new zc(this.width/t,this.height/t)}}class $c{constructor(t,n){this.type="Logical",this.x=t,this.y=n}}class or{constructor(t,n){this.type="Physical",this.x=t,this.y=n}toLogical(t){return new $c(this.x/t,this.y/t)}}var ar;(function(e){e[e.Critical=1]="Critical",e[e.Informational=2]="Informational"})(ar||(ar={}));function Li(){return window.__TAURI_METADATA__.__windows.map(e=>new Tt(e.label,{skip:!0}))}const Pi=["tauri://created","tauri://error"];class Uc{constructor(t){this.label=t,this.listeners=Object.create(null)}async listen(t,n){return this._handleTauriEvent(t,n)?Promise.resolve(()=>{const r=this.listeners[t];r.splice(r.indexOf(n),1)}):Zs(t,this.label,n)}async once(t,n){return this._handleTauriEvent(t,n)?Promise.resolve(()=>{const r=this.listeners[t];r.splice(r.indexOf(n),1)}):Bc(t,this.label,n)}async emit(t,n){if(Pi.includes(t)){for(const r of this.listeners[t]||[])r({event:t,id:-1,windowLabel:this.label,payload:n});return Promise.resolve()}return Dc(t,this.label,n)}_handleTauriEvent(t,n){return Pi.includes(t)?(t in this.listeners?this.listeners[t].push(n):this.listeners[t]=[n],!0):!1}}class jc extends Uc{async scaleFactor(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})}async innerPosition(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then(({x:t,y:n})=>new or(t,n))}async outerPosition(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then(({x:t,y:n})=>new or(t,n))}async innerSize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then(({width:t,height:n})=>new sr(t,n))}async outerSize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then(({width:t,height:n})=>new sr(t,n))}async isFullscreen(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})}async isMinimized(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMinimized"}}}})}async isMaximized(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})}async isFocused(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFocused"}}}})}async isDecorated(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})}async isResizable(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})}async isMaximizable(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximizable"}}}})}async isMinimizable(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMinimizable"}}}})}async isClosable(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isClosable"}}}})}async isVisible(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})}async title(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"title"}}}})}async theme(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"theme"}}}})}async center(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})}async requestUserAttention(t){let n=null;return t&&(t===ar.Critical?n={type:"Critical"}:n={type:"Informational"}),N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:n}}}})}async setResizable(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:t}}}})}async setMaximizable(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaximizable",payload:t}}}})}async setMinimizable(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinimizable",payload:t}}}})}async setClosable(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setClosable",payload:t}}}})}async setTitle(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:t}}}})}async maximize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})}async unmaximize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})}async toggleMaximize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})}async minimize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})}async unminimize(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})}async show(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})}async hide(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})}async close(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})}async setDecorations(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:t}}}})}async setAlwaysOnTop(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:t}}}})}async setContentProtected(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setContentProtected",payload:t}}}})}async setSize(t){if(!t||t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:t.type,data:{width:t.width,height:t.height}}}}}})}async setMinSize(t){if(t&&t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:t?{type:t.type,data:{width:t.width,height:t.height}}:null}}}})}async setMaxSize(t){if(t&&t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:t?{type:t.type,data:{width:t.width,height:t.height}}:null}}}})}async setPosition(t){if(!t||t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:t.type,data:{x:t.x,y:t.y}}}}}})}async setFullscreen(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:t}}}})}async setFocus(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})}async setIcon(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:typeof t=="string"?t:Array.from(t)}}}}})}async setSkipTaskbar(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:t}}}})}async setCursorGrab(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorGrab",payload:t}}}})}async setCursorVisible(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorVisible",payload:t}}}})}async setCursorIcon(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorIcon",payload:t}}}})}async setCursorPosition(t){if(!t||t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorPosition",payload:{type:t.type,data:{x:t.x,y:t.y}}}}}})}async setIgnoreCursorEvents(t){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIgnoreCursorEvents",payload:t}}}})}async startDragging(){return N({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})}async onResized(t){return this.listen(_e.WINDOW_RESIZED,n=>{n.payload=Hc(n.payload),t(n)})}async onMoved(t){return this.listen(_e.WINDOW_MOVED,n=>{n.payload=qc(n.payload),t(n)})}async onCloseRequested(t){return this.listen(_e.WINDOW_CLOSE_REQUESTED,n=>{const r=new Wc(n);Promise.resolve(t(r)).then(()=>{if(!r.isPreventDefault())return this.close()})})}async onFocusChanged(t){const n=await this.listen(_e.WINDOW_FOCUS,i=>{t({...i,payload:!0})}),r=await this.listen(_e.WINDOW_BLUR,i=>{t({...i,payload:!1})});return()=>{n(),r()}}async onScaleChanged(t){return this.listen(_e.WINDOW_SCALE_FACTOR_CHANGED,t)}async onMenuClicked(t){return this.listen(_e.MENU,t)}async onFileDropEvent(t){const n=await this.listen(_e.WINDOW_FILE_DROP,s=>{t({...s,payload:{type:"drop",paths:s.payload}})}),r=await this.listen(_e.WINDOW_FILE_DROP_HOVER,s=>{t({...s,payload:{type:"hover",paths:s.payload}})}),i=await this.listen(_e.WINDOW_FILE_DROP_CANCELLED,s=>{t({...s,payload:{type:"cancel"}})});return()=>{n(),r(),i()}}async onThemeChanged(t){return this.listen(_e.WINDOW_THEME_CHANGED,t)}}class Wc{constructor(t){this._preventDefault=!1,this.event=t.event,this.windowLabel=t.windowLabel,this.id=t.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}class Tt extends jc{constructor(t,n={}){super(t),n?.skip||N({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:{label:t,...n}}}}).then(async()=>this.emit("tauri://created")).catch(async r=>this.emit("tauri://error",r))}static getByLabel(t){return Li().some(n=>n.label===t)?new Tt(t,{skip:!0}):null}static async getFocusedWindow(){for(const t of Li())if(await t.isFocused())return t;return null}}"__TAURI_METADATA__"in window?new Tt(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn(`Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.
Note that this is not an issue if running this frontend on a browser instead of a Tauri window.`),new Tt("main",{skip:!0}));function qc(e){return new or(e.x,e.y)}function Hc(e){return new sr(e.width,e.height)}Mr();const Ve=Qs,lr=(e,t)=>t.some(n=>e instanceof n);let Ni,Mi;function Vc(){return Ni||(Ni=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kc(){return Mi||(Mi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ur=new WeakMap,jn=new WeakMap,Rn=new WeakMap;function Gc(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Ze(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return Rn.set(t,e),t}function Yc(e){if(ur.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});ur.set(e,t)}let cr={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ur.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ze(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function eo(e){cr=e(cr)}function Jc(e){return Kc().includes(e)?function(...t){return e.apply(fr(this),t),Ze(this.request)}:function(...t){return Ze(e.apply(fr(this),t))}}function Qc(e){return typeof e=="function"?Jc(e):(e instanceof IDBTransaction&&Yc(e),lr(e,Vc())?new Proxy(e,cr):e)}function Ze(e){if(e instanceof IDBRequest)return Gc(e);if(jn.has(e))return jn.get(e);const t=Qc(e);return t!==e&&(jn.set(e,t),Rn.set(t,e)),t}const fr=e=>Rn.get(e);function Xc(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Ze(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ze(o.result),u.oldVersion,u.newVersion,Ze(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Zc=["get","getKey","getAll","getAllKeys","count"],ef=["put","add","delete","clear"],Wn=new Map;function Fi(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Wn.get(t))return Wn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ef.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zc.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Wn.set(t,s),s}eo(e=>({...e,get:(t,n,r)=>Fi(t,n)||e.get(t,n,r),has:(t,n)=>!!Fi(t,n)||e.has(t,n)}));const tf=["continue","continuePrimaryKey","advance"],Di={},hr=new WeakMap,to=new WeakMap,nf={get(e,t){if(!tf.includes(t))return e[t];let n=Di[t];return n||(n=Di[t]=function(...r){hr.set(this,to.get(this)[t](...r))}),n}};async function*rf(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,nf);for(to.set(n,t),Rn.set(n,fr(t));t;)yield n,t=await(hr.get(n)||t.continue()),hr.delete(n)}function Bi(e,t){return t===Symbol.asyncIterator&&lr(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&lr(e,[IDBIndex,IDBObjectStore])}eo(e=>({...e,get(t,n,r){return Bi(t,n)?rf:e.get(t,n,r)},has(t,n){return Bi(t,n)||e.has(t,n)}}));const Fe=Object.create(null);Fe.open="0";Fe.close="1";Fe.ping="2";Fe.pong="3";Fe.message="4";Fe.upgrade="5";Fe.noop="6";const sn=Object.create(null);Object.keys(Fe).forEach(e=>{sn[Fe[e]]=e});const dr={type:"error",data:"parser error"},no=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ro=typeof ArrayBuffer=="function",io=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Fr=({type:e,data:t},n,r)=>no&&t instanceof Blob?n?r(t):zi(t,r):ro&&(t instanceof ArrayBuffer||io(t))?n?r(t):zi(new Blob([t]),r):r(Fe[e]+(t||"")),zi=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function $i(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let qn;function sf(e,t){if(no&&e.data instanceof Blob)return e.data.arrayBuffer().then($i).then(t);if(ro&&(e.data instanceof ArrayBuffer||io(e.data)))return t($i(e.data));Fr(e,!1,n=>{qn||(qn=new TextEncoder),t(qn.encode(n))})}const Ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ui.length;e++)wt[Ui.charCodeAt(e)]=e;const of=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,a,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const l=new ArrayBuffer(t),c=new Uint8Array(l);for(r=0;r<n;r+=4)s=wt[e.charCodeAt(r)],o=wt[e.charCodeAt(r+1)],a=wt[e.charCodeAt(r+2)],u=wt[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|u&63;return l},af=typeof ArrayBuffer=="function",Dr=(e,t)=>{if(typeof e!="string")return{type:"message",data:so(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:lf(e.substring(1),t)}:sn[n]?e.length>1?{type:sn[n],data:e.substring(1)}:{type:sn[n]}:dr},lf=(e,t)=>{if(af){const n=of(e);return so(n,t)}else return{base64:!0,data:e}},so=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},oo="",uf=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Fr(s,!1,a=>{r[o]=a,++i===n&&t(r.join(oo))})})},cf=(e,t)=>{const n=e.split(oo),r=[];for(let i=0;i<n.length;i++){const s=Dr(n[i],t);if(r.push(s),s.type==="error")break}return r};function ff(){return new TransformStream({transform(e,t){sf(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Hn;function Ht(e){return e.reduce((t,n)=>t+n.length,0)}function Vt(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function hf(e,t){Hn||(Hn=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Ht(n)<1)break;const u=Vt(n,1);s=(u[0]&128)===128,i=u[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ht(n)<2)break;const u=Vt(n,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(Ht(n)<8)break;const u=Vt(n,8),l=new DataView(u.buffer,u.byteOffset,u.length),c=l.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(dr);break}i=c*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Ht(n)<i)break;const u=Vt(n,i);a.enqueue(Dr(s?u:Hn.decode(u),t)),r=0}if(i===0||i>e){a.enqueue(dr);break}}}})}const ao=4;function se(e){if(e)return df(e)}function df(e){for(var t in se.prototype)e[t]=se.prototype[t];return e}se.prototype.on=se.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};se.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};se.prototype.off=se.prototype.removeListener=se.prototype.removeAllListeners=se.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};se.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};se.prototype.emitReserved=se.prototype.emit;se.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};se.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ke=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function lo(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const pf=ke.setTimeout,mf=ke.clearTimeout;function In(e,t){t.useNativeTimers?(e.setTimeoutFn=pf.bind(ke),e.clearTimeoutFn=mf.bind(ke)):(e.setTimeoutFn=ke.setTimeout.bind(ke),e.clearTimeoutFn=ke.clearTimeout.bind(ke))}const gf=1.33;function yf(e){return typeof e=="string"?wf(e):Math.ceil((e.byteLength||e.size)*gf)}function wf(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function bf(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function _f(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class xf extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Br extends se{constructor(t){super(),this.writable=!1,In(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new xf(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Dr(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=bf(t);return n.length?"?"+n:""}}const uo="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),pr=64,kf={};let ji=0,Kt=0,Wi;function qi(e){let t="";do t=uo[e%pr]+t,e=Math.floor(e/pr);while(e>0);return t}function co(){const e=qi(+new Date);return e!==Wi?(ji=0,Wi=e):e+"."+qi(ji++)}for(;Kt<pr;Kt++)kf[uo[Kt]]=Kt;let fo=!1;try{fo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Sf=fo;function ho(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Sf))return new XMLHttpRequest}catch{}if(!t)try{return new ke[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Ef(){}const Af=function(){return new ho({xdomain:!1}).responseType!=null}();class Cf extends Br{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}const n=t&&t.forceBase64;this.supportsBinary=Af&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};cf(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,uf(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=co()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new rt(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let rt=class on extends se{constructor(t,n){super(),In(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=lo(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new ho(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=on.requestsCount++,on.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Ef,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete on.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};rt.requestsCount=0;rt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Hi);else if(typeof addEventListener=="function"){const e="onpagehide"in ke?"pagehide":"unload";addEventListener(e,Hi,!1)}}function Hi(){for(let e in rt.requests)rt.requests.hasOwnProperty(e)&&rt.requests[e].abort()}const zr=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Gt=ke.WebSocket||ke.MozWebSocket,Vi=!0,Of="arraybuffer",Ki=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class vf extends Br{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=Ki?{}:lo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Vi&&!Ki?n?new Gt(t,n):new Gt(t):new Gt(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Fr(r,this.supportsBinary,s=>{const o={};try{Vi&&this.ws.send(s)}catch{}i&&zr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=co()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Gt}}class Tf extends Br{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=hf(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=ff();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:u})=>{a||(this.onPacket(u),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this.writer.write(r).then(()=>{i&&zr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const Rf={websocket:vf,webtransport:Tf,polling:Cf},If=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Lf=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mr(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=If.exec(e||""),s={},o=14;for(;o--;)s[Lf[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Pf(s,s.path),s.queryKey=Nf(s,s.query),s}function Pf(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Nf(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let po=class nt extends se{constructor(t,n={}){super(),this.binaryType=Of,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=mr(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=mr(n.host).host),In(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=_f(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=ao,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new Rf[t](r)}open(){let t;if(this.opts.rememberUpgrade&&nt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),r=!1;nt.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;nt.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const m=new Error("probe error: "+f);m.transport=n.name,s(),this.emitReserved("upgradeError",m)};function a(){o("transport closed")}function u(){o("socket closed")}function l(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",u),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",u),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",nt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=yf(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(t,n,r){return this.sendPacket("message",t,n,r),this}send(t,n,r){return this.sendPacket("message",t,n,r),this}sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){nt.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let r=0;const i=t.length;for(;r<i;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}};po.protocol=ao;function Mf(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=mr(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Ff=typeof ArrayBuffer=="function",Df=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,mo=Object.prototype.toString,Bf=typeof Blob=="function"||typeof Blob<"u"&&mo.call(Blob)==="[object BlobConstructor]",zf=typeof File=="function"||typeof File<"u"&&mo.call(File)==="[object FileConstructor]";function $r(e){return Ff&&(e instanceof ArrayBuffer||Df(e))||Bf&&e instanceof Blob||zf&&e instanceof File}function an(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(an(e[n]))return!0;return!1}if($r(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return an(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&an(e[n]))return!0;return!1}function $f(e){const t=[],n=e.data,r=e;return r.data=gr(n,t),r.attachments=t.length,{packet:r,buffers:t}}function gr(e,t){if(!e)return e;if($r(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=gr(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=gr(e[r],t));return n}return e}function Uf(e,t){return e.data=yr(e.data,t),delete e.attachments,e}function yr(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=yr(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=yr(e[n],t));return e}const jf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Wf=5;var j;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(j||(j={}));class qf{constructor(t){this.replacer=t}encode(t){return(t.type===j.EVENT||t.type===j.ACK)&&an(t)?this.encodeAsBinary({type:t.type===j.EVENT?j.BINARY_EVENT:j.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===j.BINARY_EVENT||t.type===j.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=$f(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Gi(e){return Object.prototype.toString.call(e)==="[object Object]"}class Ur extends se{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===j.BINARY_EVENT;r||n.type===j.BINARY_ACK?(n.type=r?j.EVENT:j.ACK,this.reconstructor=new Hf(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if($r(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(j[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===j.BINARY_EVENT||r.type===j.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Ur.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case j.CONNECT:return Gi(n);case j.DISCONNECT:return n===void 0;case j.CONNECT_ERROR:return typeof n=="string"||Gi(n);case j.EVENT:case j.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&jf.indexOf(n[0])===-1);case j.ACK:case j.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Hf{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Uf(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Vf=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ur,Encoder:qf,get PacketType(){return j},protocol:Wf},Symbol.toStringTag,{value:"Module"}));function Te(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Kf=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class go extends se{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Te(t,"open",this.onopen.bind(this)),Te(t,"packet",this.onpacket.bind(this)),Te(t,"error",this.onerror.bind(this)),Te(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(Kf.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:j.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:j.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case j.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case j.EVENT:case j.BINARY_EVENT:this.onevent(t);break;case j.ACK:case j.BINARY_ACK:this.onack(t);break;case j.DISCONNECT:this.ondisconnect();break;case j.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:j.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:j.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function ft(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ft.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ft.prototype.reset=function(){this.attempts=0};ft.prototype.setMin=function(e){this.ms=e};ft.prototype.setMax=function(e){this.max=e};ft.prototype.setJitter=function(e){this.jitter=e};class wr extends se{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,In(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ft({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Vf;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new po(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Te(n,"open",function(){r.onopen(),t&&t()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=Te(n,"error",s);if(this._timeout!==!1){const a=this._timeout,u=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Te(t,"ping",this.onping.bind(this)),Te(t,"data",this.ondata.bind(this)),Te(t,"error",this.onerror.bind(this)),Te(t,"close",this.onclose.bind(this)),Te(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){zr(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new go(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const mt={};function ln(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Mf(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=mt[i]&&s in mt[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let u;return a?u=new wr(r,t):(mt[i]||(mt[i]=new wr(r,t)),u=mt[i]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(ln,{Manager:wr,Socket:go,io:ln,connect:ln});const Gf="/spaced/ocr-demo/assets/eng_bw-C9Ow99-y.png",$e="__TAURI__"in window,Yf=new Set(["text/plain","text/markdown","image/png","image/svg+xml","image/jpeg","image/gif","application/pdf"]),$t=ln(window.location.origin,{autoConnect:!1,auth:{user:"test"}}),Jf="spaced",Ke="item";let Ee;async function Qf(e,t){const n=e||localStorage.getItem("storage"),r=t||localStorage.getItem("path");switch(n){case"browser":return localStorage.setItem("storage","browser"),Ee||(Ee=await Xc(Jf,1,{async upgrade(i){i.createObjectStore(Ke,{keyPath:"id",autoIncrement:!0});const s=await fetch(Gf);i.add(Ke,{x:0,y:0,w:0,h:0,mime:"image/png",file:[...new Uint8Array(await s.arrayBuffer())]})}})),!0;case"local":return $e&&r?(localStorage.setItem("storage","local"),localStorage.setItem("path",r),await Ve("connect",{path:r}),!0):!1;case"cloud":return localStorage.getItem("access_token")?(localStorage.setItem("storage","cloud"),$t.connect(),!0):!1;default:return localStorage.removeItem("storage"),!1}}async function Xf(){switch(localStorage.getItem("storage")){case"browser":{if(Ee)return await Ee.getAll(Ke);break}case"local":{if($e)return await Ve("get_nearby_items");break}case"cloud":{if(localStorage.getItem("access_token"))return await $t.emitWithAck("item:get_nearby");break}default:throw new Error("No storage type selected.")}throw new Error("Failed to get nearby items.")}async function Zf(e){switch(localStorage.getItem("storage")){case"browser":{if(Ee){const n=await Ee.add(Ke,e);return await Ee.get(Ke,n)}break}case"local":{if($e)return await Ve("create_item",e);break}case"cloud":{if(localStorage.getItem("access_token"))return await $t.emitWithAck("item:create",e);break}default:throw new Error("No storage type selected.")}throw new Error("Failed to create item.")}async function eh(e){switch(localStorage.getItem("storage")){case"browser":{if(Ee){const n=await Ee.put(Ke,e);return await Ee.get(Ke,n)}break}case"local":{if($e)return await Ve("patch_item",e);break}case"cloud":{if(localStorage.getItem("access_token"))return await $t.emitWithAck("item:update_inner",e);break}default:throw new Error("No storage type selected.")}throw new Error("Failed to update item.")}async function th(e){switch(localStorage.getItem("storage")){case"browser":{if(Ee)return await Ee.delete(Ke,e),e;break}case"local":{if($e)return await Ve("delete_item",{id:e});break}case"cloud":break;default:throw new Error("No storage type selected.")}throw new Error("Failed to delete item.")}const yo=Ft({socket:$t,connect:Qf,getNearByItems:Xf,createItem:Zf,updateItem:eh,deleteItem:th});function nh(e){return Q(yo.Provider,{get children(){return e.children}})}function ht(){return Dt(yo)}const[rh,ih]=ue([]),sh=Ft({items:rh,setItems:ih});function Ln(){return Dt(sh)}const[oh,wo]=ue(new Set);function ah(e){wo(t=>new Set([...t,e]))}const[lh,jr]=ue(!1),[uh,Wr]=ue(!1);window.addEventListener("keydown",e=>{jr(e.ctrlKey),Wr(e.shiftKey)});window.addEventListener("keyup",e=>{jr(e.ctrlKey),Wr(e.shiftKey)});window.addEventListener("click",e=>{jr(e.ctrlKey),Wr(e.shiftKey)});function ch(e){wo(t=>{const n=new Set(t);return n.delete(e),n})}const fh=Ft({getSelected:oh,register:ah,unregister:ch,holdingCtrl:lh,holdingShift:uh});function bo(){return Dt(fh)}function hh(e,t=1e3){let n,r;return(...i)=>(clearTimeout(n),n=setTimeout(async()=>(r=await e(...i),r),t),r)}const dh=oe('<div id=viewport class="h-full w-full">'),[br,ph]=ue(1.2),[_r,mh]=ue(1.05),[He,qr]=ue(1),[gh,Pn]=ue(new ae(0,0));function Hr(e,t){Pn(n=>Nc(e,n,He(),t)),qr(n=>n*t)}function Vr(e,t){Pn(n=>Mc(e,n,He(),t)),qr(n=>n/t)}const{items:yh,setItems:wh}=Ln(),{getSelected:bh}=bo();let Yt=new ae(0,0),un,pe=[];const[_o,Kr]=ue(new ae(0,0));function xo(e,t){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.hypot(n,r)}function _h(e,t){const n=(e.clientX+t.clientX)/2,r=-(e.clientY+t.clientY)/2;return new ae(n,r)}function xh(e){e.pointerType==="touch"&&(pe.push(e),Kr(new ae(e.clientX,-e.clientY)),pe.length===2&&(un=xo(pe[0],pe[1])))}function kh(e){if(e.pointerType==="touch"&&pe.length===2){for(let s=0;s<pe.length;s++)if(pe[s].pointerId===e.pointerId){pe[s]=e;break}const t=xo(pe[0],pe[1]),n=_h(pe[0],pe[1]),r=t>un,i=t<un;r&&He()<160?Hr(n,_r()):i&&He()>.01&&Vr(n,_r()),un=t;return}if(Yt=new ae(e.clientX,-e.clientY).sub(_o()).div(He()),e.shiftKey&&e.buttons===1){const t=bh(),n=yh().map(r=>t.has(r.id)?{...r,x:r.x+Yt.x,y:r.y+Yt.y}:r);if($e)for(const r of n.map(i=>({...i,x:Math.floor(i.x),y:Math.floor(i.y)})).filter(i=>t.has(i.id)))hh(async()=>{await Ve("patch_item",r)},100)();wh(n)}else e.buttons===1&&Pn(t=>t.add(Yt.neg()));Kr(new ae(e.clientX,-e.clientY))}function Yi(e){pe=pe.filter(n=>n.pointerId!==e.pointerId);const[t]=pe;t&&Kr(new ae(t.clientX,-t.clientY))}function Ji(e){const t=e.deltaY<0,n=e.deltaY>0,r=new ae(e.clientX,-e.clientY);t&&He()<160?Hr(r,br()):n&&He()>.01&&Vr(r,br())}const ko=Ft({wheelFactor:br,setWheelFactor:ph,pinchFactor:_r,setPinchFactor:mh,scalar:He,setScalar:qr,handleZoomIn:Hr,handleZoomOut:Vr,absoluteViewportPosition:gh,setAbsoluteViewportPosition:Pn,lastRelativePointerPosition:_o});let Jt;function Sh(e){return Ge(()=>{Jt.addEventListener("wheel",Ji),Mt(()=>{Jt.removeEventListener("wheel",Ji)})}),Q(ko.Provider,{get children(){const t=dh(),n=Jt;return typeof n=="function"?Ye(n,t):Jt=t,t.$$pointerup=Yi,t.addEventListener("pointercancel",Yi),t.$$pointermove=kh,t.$$pointerdown=xh,le(t,()=>e.children),t}})}function Gr(){return Dt(ko)}ut(["pointerdown","pointermove","pointerup"]);const Eh=oe('<button class="z-50 flex h-8 w-8 place-content-center place-items-center rounded border-[1px] border-[#505050] bg-[#2D2D2D] text-gray-400 transition-colors hover:border-[#777777] hover:bg-[#333333]"title="Create Item">');function Ah(){const{absoluteViewportPosition:e,scalar:t}=Gr(),{setItems:n}=Ln(),{createItem:r}=ht();async function i(){const s=vt(new ae(window.innerWidth/2-24,-(window.innerHeight/2-24)),e(),t());try{const o=await r({x:Math.floor(s.x),y:Math.floor(s.y),w:0,h:0,name:"test",mime:"text/plain",schema:"test"});n(a=>a.concat(o))}catch{}}return(()=>{const s=Eh();return s.$$click=i,le(s,Q(Rc,{})),s})()}ut(["click"]);class bt extends Error{}bt.prototype.name="InvalidTokenError";function Ch(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Oh(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Ch(t)}catch{return atob(t)}}function vh(e,t){if(typeof e!="string")throw new bt("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new bt(`Invalid token specified: missing part #${n+1}`);let i;try{i=Oh(r)}catch(s){throw new bt(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new bt(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Th=oe('<label class="mb-2 block font-semibold text-gray-800">Username<input type=text name=username class="w-full rounded border px-3 py-2 outline-none transition-all duration-300 focus:border-blue-500"placeholder=username>'),Rh=oe('<dialog class="inset-0 z-[9999] flex h-[460px] items-center justify-center rounded"><form class="flex h-full w-96 flex-col overflow-hidden rounded-md p-8 shadow-md"><h2 class="mb-4 text-center text-2xl font-bold text-gray-800"></h2><div class="mb-6 flex-grow"><label class="mb-2 block font-semibold text-gray-800">Email<input type=email name=email class="w-full rounded border px-3 py-2 outline-none transition-all duration-300 focus:border-blue-500"placeholder=email></label><label class="mb-2 block font-semibold text-gray-800">Password<input type=password name=password class="w-full rounded border px-3 py-2 outline-none transition-all duration-300 focus:border-blue-500"placeholder=•••••••••••••></label></div><button class="w-full rounded-md bg-blue-500 px-4 py-2 text-white outline-none transition-all duration-300 hover:bg-blue-600"type=submit>Submit</button><div class="mt-6 text-center text-gray-800">'),Ih=oe('<p>Already have an account? <button class="text-blue-500 transition-all duration-300 hover:underline focus:outline-none">Login here'),Lh=oe(`<p>Don't have an account? <button class="text-blue-500 transition-all duration-300 hover:underline focus:outline-none">Register here`),{socket:Vn}=ht(),[Qi,tt]=ue(!1),[Qt,Xi]=ue(!1);let xr;function Ph(e){const[t,n]=ue({access_token:localStorage.access_token,refresh_token:localStorage.refresh_token});function r(a,u,l){te.post("/api/user/register",{email:u,username:a,password:l}).then(c=>{tt(!0),localStorage.setItem("access_token",c.data.access_token),localStorage.setItem("refresh_token",c.data.refresh_token),n(c.data),Vn.connect()})}function i(a,u){te.post("/api/user/login",{email:a,password:u}).then(l=>{tt(!0),localStorage.setItem("access_token",l.data.access_token),localStorage.setItem("refresh_token",l.data.refresh_token),n(l.data),Vn.connect()})}function s(){tt(!1),delete localStorage.access_token,delete localStorage.refresh_token}function o(a){a.preventDefault();const u=a.target;if(!u)return;const l=new FormData(u),c=l.get("email")?.toString(),f=l.get("password")?.toString();c&&f&&(Qt()?r(l.get("username")?.toString()??"user",c,f):i(c,f))}return Ge(()=>{if(!t().access_token||!t().refresh_token){s(),tt(!1);return}tt(!0),Vn.connect();const{exp:a}=vh(t().access_token),u=a*1e3-3e4-Date.now(),l=setTimeout(async()=>{try{const{data:c}=await te.post("/api/user/refresh",{refresh_token:t().refresh_token});tt(!0),localStorage.setItem("access_token",c.access_token),localStorage.setItem("refresh_token",c.refresh_token)}catch{s()}},u);return()=>{clearTimeout(l)}}),xr=Ft({register:r,login:i,logout:s,isLoggedIn:Qi}),Q(xr.Provider,{get children(){return[Q(st,{when:!1,get children(){const a=Rh(),u=a.firstChild,l=u.firstChild,c=l.nextSibling,f=c.firstChild,m=f.nextSibling,p=c.nextSibling,g=p.nextSibling;return u.addEventListener("submit",o),le(l,()=>Qt()?"Register":"Login to account"),le(c,Q(st,{get when(){return Qt()},get children(){return Th()}}),m),le(g,(()=>{const w=we(()=>!!Qt());return()=>w()?(()=>{const E=Ih(),y=E.firstChild,b=y.nextSibling;return b.$$click=()=>Xi(!1),E})():(()=>{const E=Lh(),y=E.firstChild,b=y.nextSibling;return b.$$click=()=>Xi(!0),E})()})()),Ie(()=>a.open=!Qi()),a}}),we(()=>e.children)]}})}function Nh(){return Dt(xr)}ut(["click"]);const Mh=oe('<button class="z-50 flex h-8 w-8 place-content-center place-items-center overflow-visible rounded border-[1px] border-[#505050] bg-[#2D2D2D] text-gray-400 transition-colors hover:border-[#777777] hover:bg-[#333333]"title="Log Out">');function Fh(){const{isLoggedIn:e,logout:t}=Nh();return Q(st,{get when(){return e()},get children(){const n=Mh();return Hs(n,"click",t,!0),le(n,Q(Ic,{})),n}})}ut(["click"]);const Dh=oe('<span class="before:absolute before:-left-[0.125rem] before:-top-[0.125rem] before:h-[0.375rem] before:w-[0.375rem] before:rounded-full before:bg-yellow-600 before:shadow before:shadow-[#2D2D2D]">'),Bh=oe('<div class="z-50 flex h-8 w-8 place-content-center place-items-center rounded border-[1px] border-[#505050] bg-[#2D2D2D] text-gray-400 transition-colors hover:border-[#777777] hover:bg-[#333333]"><select class="z-50 appearance-none overflow-visible bg-transparent text-transparent outline-none"title="Connect to storage"><option value=browser>Browser</option><option value=local>Local</option><option disabled value=cloud>Cloud');function zh(){const{connect:e,getNearByItems:t}=ht(),{setItems:n}=Ln(),[r,i]=ue();let s;async function o(a){const u=a.target;let l;u.value==="local"&&(l=await Ve("save"));const c=await e(u.value,l);i(c);const f=await t();n(f)}return Ge(async()=>{const a=localStorage.getItem("storage");if(a){s.value=a,i(!0);return}else{let u;s.value==="local"&&(u=await Ve("save")),e($e?"local":"browser",u).then(i)}}),(()=>{const a=Bh(),u=a.firstChild,l=u.firstChild,c=l.nextSibling;le(a,Q(st,{get when(){return!r()},get children(){return Dh()}}),u),le(a,Q(Tc,{class:"absolute"}),u),u.addEventListener("change",o);const f=s;return typeof f=="function"?Ye(f,u):s=u,c.disabled=!$e,a})()}const $h=oe('<div class="absolute right-1 top-1 flex flex-col gap-1 overflow-visible">');function Uh(){return(()=>{const e=$h();return le(e,Q(st,{when:!$e,get children(){return Q(Fh,{})}}),null),le(e,Q(zh,{}),null),le(e,Q(Ah,{}),null),e})()}const jh=oe('<svg class="absolute z-0 h-full w-full"><pattern id=background width=13 height=13 patternUnits=userSpaceOnUse><circle cx=0.7 cy=0.7 r=0.7 fill=#363636></circle></pattern><rect x=0 y=0 fill=url(#background) class="h-full w-full">');function Wh(){return jh()}const Zi=document.createElement("i");function So(e){const t="&"+e+";";Zi.innerHTML=t;const n=Zi.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ue(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function he(e,t){return e.length>0?(Ue(e,e.length,0,t),e):t}const kr={}.hasOwnProperty;function qh(e){const t={};let n=-1;for(;++n<e.length;)Hh(t,e[n]);return t}function Hh(e,t){let n;for(n in t){const i=(kr.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){kr.call(i,o)||(i[o]=[]);const a=s[o];Vh(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Vh(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ue(e,0,0,r)}function Kh(e){const t={};let n=-1;for(;++n<e.length;)Gh(t,e[n]);return t}function Gh(e,t){let n;for(n in t){const i=(kr.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s)i[o]=s[o]}}function Yh(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}const Jh={'"':"quot","&":"amp","<":"lt",">":"gt"};function Eo(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+Jh[n]+";"}}function Rt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ne=Je(/[A-Za-z]/),xe=Je(/[\dA-Za-z]/),Qh=Je(/[#-'*+\--9=?A-Z^-~]/);function Sr(e){return e!==null&&(e<32||e===127)}const Er=Je(/\d/),Xh=Je(/[\dA-Fa-f]/),Zh=Je(/[!-/:-@[-`{-~]/);function D(e){return e!==null&&e<-2}function ye(e){return e!==null&&(e<0||e===32)}function V(e){return e===-2||e===-1||e===32}const ed=Je(/\p{P}|\p{S}/u),td=Je(/\s/);function Je(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Xt(e,t){const n=Eo(nd(e||""));if(!t)return n;const r=n.indexOf(":"),i=n.indexOf("?"),s=n.indexOf("#"),o=n.indexOf("/");return r<0||o>-1&&r>o||i>-1&&r>i||s>-1&&r>s||t.test(n.slice(0,r))?n:""}function nd(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&xe(e.charCodeAt(n+1))&&xe(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}const es={}.hasOwnProperty,ts=/^(https?|ircs?|mailto|xmpp)$/i,rd=/^https?$/i;function id(e){const t=e||{};let n=!0;const r={},i=[[]],s=[],o=[],u=Kh([{enter:{blockQuote:B,codeFenced:S,codeFencedFenceInfo:E,codeFencedFenceMeta:E,codeIndented:M,codeText:ra,content:Ho,definition:zo,definitionDestinationString:Uo,definitionLabelString:E,definitionTitleString:E,emphasis:ta,htmlFlow:ea,htmlText:ri,image:v,label:E,link:$,listItemMarker:R,listItemValue:ne,listOrdered:Y,listUnordered:J,paragraph:ee,reference:E,resource:Ce,resourceDestinationString:fe,resourceTitleString:E,setextHeading:Ko,strong:na},exit:{atxHeading:Yo,atxHeadingSequence:Vo,autolinkEmail:ca,autolinkProtocol:ua,blockQuote:re,characterEscapeValue:dt,characterReferenceMarkerHexadecimal:ii,characterReferenceMarkerNumeric:ii,characterReferenceValue:la,codeFenced:d,codeFencedFence:C,codeFencedFenceInfo:h,codeFencedFenceMeta:U,codeFlowValue:Zo,codeIndented:d,codeText:ia,codeTextData:dt,data:dt,definition:qo,definitionDestinationString:jo,definitionLabelString:$o,definitionTitleString:Wo,emphasis:sa,hardBreakEscape:ti,hardBreakTrailing:ti,htmlFlow:ni,htmlFlowData:dt,htmlText:ni,htmlTextData:dt,image:ei,label:W,labelText:F,lineEnding:Xo,link:ei,listOrdered:L,listUnordered:K,paragraph:ce,reference:U,referenceString:H,resource:U,resourceDestinationString:be,resourceTitleString:Bo,setextHeading:Qo,setextHeadingLineSequence:Jo,setextHeadingText:Go,strong:oa,thematicBreak:aa}}].concat(t.htmlExtensions||[])),l={tightStack:o,definitions:r},c={lineEndingIfNeeded:T,options:t,encode:x,raw:k,tag:b,buffer:E,resume:y,setData:g,getData:w};let f=t.defaultLineEnding;return m;function m(O){let I=-1,me=0;const Oe=[];let Le=[],Be=[];for(;++I<O.length;)!f&&(O[I][1].type==="lineEnding"||O[I][1].type==="lineEndingBlank")&&(f=O[I][2].sliceSerialize(O[I][1])),(O[I][1].type==="listOrdered"||O[I][1].type==="listUnordered")&&(O[I][0]==="enter"?Oe.push(I):p(O.slice(Oe.pop(),I))),O[I][1].type==="definition"&&(O[I][0]==="enter"?(Be=he(Be,O.slice(me,I)),me=I):(Le=he(Le,O.slice(me,I+1)),me=I+1));Le=he(Le,Be),Le=he(Le,O.slice(me)),I=-1;const Pe=Le;for(u.enter.null&&u.enter.null.call(c);++I<O.length;){const si=u[Pe[I][0]],oi=Pe[I][1].type,ai=si[oi];es.call(si,oi)&&ai&&ai.call(Object.assign({sliceSerialize:Pe[I][2].sliceSerialize},c),Pe[I][1])}return u.exit.null&&u.exit.null.call(c),i[0].join("")}function p(O){const I=O.length;let me=0,Oe=0,Le=!1,Be;for(;++me<I;){const Pe=O[me];if(Pe[1]._container)Be=void 0,Pe[0]==="enter"?Oe++:Oe--;else switch(Pe[1].type){case"listItemPrefix":{Pe[0]==="exit"&&(Be=!0);break}case"linePrefix":break;case"lineEndingBlank":{Pe[0]==="enter"&&!Oe&&(Be?Be=void 0:Le=!0);break}default:Be=void 0}}O[0][1]._loose=Le}function g(O,I){l[O]=I}function w(O){return l[O]}function E(){i.push([])}function y(){return i.pop().join("")}function b(O){n&&(g("lastWasTag",!0),i[i.length-1].push(O))}function k(O){g("lastWasTag"),i[i.length-1].push(O)}function P(){k(f||`
`)}function T(){const O=i[i.length-1],I=O[O.length-1],me=I?I.charCodeAt(I.length-1):null;me===10||me===13||me===null||P()}function x(O){return w("ignoreEncode")?O:Eo(O)}function U(){y()}function Y(O){o.push(!O._loose),T(),b("<ol"),g("expectFirstItem",!0)}function J(O){o.push(!O._loose),T(),b("<ul"),g("expectFirstItem",!0)}function ne(O){if(w("expectFirstItem")){const I=Number.parseInt(this.sliceSerialize(O),10);I!==1&&b(' start="'+x(String(I))+'"')}}function R(){w("expectFirstItem")?b(">"):X(),T(),b("<li>"),g("expectFirstItem"),g("lastWasTag")}function L(){X(),o.pop(),P(),b("</ol>")}function K(){X(),o.pop(),P(),b("</ul>")}function X(){w("lastWasTag")&&!w("slurpAllLineEndings")&&T(),b("</li>"),g("slurpAllLineEndings")}function B(){o.push(!1),T(),b("<blockquote>")}function re(){o.pop(),T(),b("</blockquote>"),g("slurpAllLineEndings")}function ee(){o[o.length-1]||(T(),b("<p>")),g("slurpAllLineEndings")}function ce(){o[o.length-1]?g("slurpAllLineEndings",!0):b("</p>")}function S(){T(),b("<pre><code"),g("fencesCount",0)}function h(){const O=y();b(' class="language-'+O+'"')}function C(){const O=w("fencesCount")||0;O||(b(">"),g("slurpOneLineEnding",!0)),g("fencesCount",O+1)}function M(){T(),b("<pre><code>")}function d(){const O=w("fencesCount");O!==void 0&&O<2&&l.tightStack.length>0&&!w("lastWasTag")&&P(),w("flowCodeSeenData")&&T(),b("</code></pre>"),O!==void 0&&O<2&&T(),g("flowCodeSeenData"),g("fencesCount"),g("slurpOneLineEnding")}function v(){s.push({image:!0}),n=void 0}function $(){s.push({})}function F(O){s[s.length-1].labelId=this.sliceSerialize(O)}function W(){s[s.length-1].label=y()}function H(O){s[s.length-1].referenceId=this.sliceSerialize(O)}function Ce(){E(),s[s.length-1].destination=""}function fe(){E(),g("ignoreEncode",!0)}function be(){s[s.length-1].destination=y(),g("ignoreEncode")}function Bo(){s[s.length-1].title=y()}function ei(){let O=s.length-1;const I=s[O],me=I.referenceId||I.labelId,Oe=I.destination===void 0?r[Rt(me)]:I;for(n=!0;O--;)if(s[O].image){n=void 0;break}I.image?(b('<img src="'+Xt(Oe.destination,t.allowDangerousProtocol?void 0:rd)+'" alt="'),k(I.label),b('"')):b('<a href="'+Xt(Oe.destination,t.allowDangerousProtocol?void 0:ts)+'"'),b(Oe.title?' title="'+Oe.title+'"':""),I.image?b(" />"):(b(">"),k(I.label),b("</a>")),s.pop()}function zo(){E(),s.push({})}function $o(O){y(),s[s.length-1].labelId=this.sliceSerialize(O)}function Uo(){E(),g("ignoreEncode",!0)}function jo(){s[s.length-1].destination=y(),g("ignoreEncode")}function Wo(){s[s.length-1].title=y()}function qo(){const O=s[s.length-1],I=Rt(O.labelId);y(),es.call(r,I)||(r[I]=s[s.length-1]),s.pop()}function Ho(){g("slurpAllLineEndings",!0)}function Vo(O){w("headingRank")||(g("headingRank",this.sliceSerialize(O).length),T(),b("<h"+w("headingRank")+">"))}function Ko(){E(),g("slurpAllLineEndings")}function Go(){g("slurpAllLineEndings",!0)}function Yo(){b("</h"+w("headingRank")+">"),g("headingRank")}function Jo(O){g("headingRank",this.sliceSerialize(O).charCodeAt(0)===61?1:2)}function Qo(){const O=y();T(),b("<h"+w("headingRank")+">"),k(O),b("</h"+w("headingRank")+">"),g("slurpAllLineEndings"),g("headingRank")}function dt(O){k(x(this.sliceSerialize(O)))}function Xo(O){if(!w("slurpAllLineEndings")){if(w("slurpOneLineEnding")){g("slurpOneLineEnding");return}if(w("inCodeText")){k(" ");return}k(x(this.sliceSerialize(O)))}}function Zo(O){k(x(this.sliceSerialize(O))),g("flowCodeSeenData",!0)}function ti(){b("<br />")}function ea(){T(),ri()}function ni(){g("ignoreEncode")}function ri(){t.allowDangerousHtml&&g("ignoreEncode",!0)}function ta(){b("<em>")}function na(){b("<strong>")}function ra(){g("inCodeText",!0),b("<code>")}function ia(){g("inCodeText"),b("</code>")}function sa(){b("</em>")}function oa(){b("</strong>")}function aa(){T(),b("<hr />")}function ii(O){g("characterReferenceType",O.type)}function la(O){let I=this.sliceSerialize(O);I=w("characterReferenceType")?Yh(I,w("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):So(I),k(x(I)),g("characterReferenceType")}function ua(O){const I=this.sliceSerialize(O);b('<a href="'+Xt(I,t.allowDangerousProtocol?void 0:ts)+'">'),k(x(I)),b("</a>")}function ca(O){const I=this.sliceSerialize(O);b('<a href="'+Xt("mailto:"+I)+'">'),k(x(I)),b("</a>")}}function Z(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return V(u)?(e.enter(n),a(u)):t(u)}function a(u){return V(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const sd={tokenize:od};function od(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Z(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return D(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const ad={tokenize:ld},ns={tokenize:ud};function ld(e){const t=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const P=n[r];return t.containerState=P[1],e.attempt(P[0].continuation,u,l)(k)}return l(k)}function u(k){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const P=t.events.length;let T=P,x;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){x=t.events[T][1].end;break}y(r);let U=P;for(;U<t.events.length;)t.events[U][1].end=Object.assign({},x),U++;return Ue(t.events,T+1,0,t.events.slice(P)),t.events.length=U,l(k)}return a(k)}function l(k){if(r===n.length){if(!i)return m(k);if(i.currentConstruct&&i.currentConstruct.concrete)return g(k);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ns,c,f)(k)}function c(k){return i&&b(),y(r),m(k)}function f(k){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(k)}function m(k){return t.containerState={},e.attempt(ns,p,g)(k)}function p(k){return r++,n.push([t.currentConstruct,t.containerState]),m(k)}function g(k){if(k===null){i&&b(),y(0),e.consume(k);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),w(k)}function w(k){if(k===null){E(e.exit("chunkFlow"),!0),y(0),e.consume(k);return}return D(k)?(e.consume(k),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(k),w)}function E(k,P){const T=t.sliceStream(k);if(P&&T.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write(T),t.parser.lazy[k.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const U=t.events.length;let Y=U,J,ne;for(;Y--;)if(t.events[Y][0]==="exit"&&t.events[Y][1].type==="chunkFlow"){if(J){ne=t.events[Y][1].end;break}J=!0}for(y(r),x=U;x<t.events.length;)t.events[x][1].end=Object.assign({},ne),x++;Ue(t.events,Y+1,0,t.events.slice(U)),t.events.length=x}}function y(k){let P=n.length;for(;P-- >k;){const T=n[P];t.containerState=T[1],T[0].exit.call(t,e)}n.length=k}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function ud(e,t,n){return Z(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function rs(e){if(e===null||ye(e)||td(e))return 1;if(ed(e))return 2}function Yr(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Ar={name:"attention",tokenize:fd,resolveAll:cd};function cd(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),m=Object.assign({},e[n][1].start);is(f,-u),is(m,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:m},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=he(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=he(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=he(l,Yr(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=he(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=he(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ue(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function fd(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=rs(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=rs(u),f=!c||c===2&&i||n.includes(u),m=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!m)),l._close=!!(s===42?m:m&&(c||!f)),t(u)}}function is(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const hd={name:"autolink",tokenize:dd};function dd(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return Ne(p)?(e.consume(p),o):p===64?n(p):l(p)}function o(p){return p===43||p===45||p===46||xe(p)?(r=1,a(p)):l(p)}function a(p){return p===58?(e.consume(p),r=0,u):(p===43||p===45||p===46||xe(p))&&r++<32?(e.consume(p),a):(r=0,l(p))}function u(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||Sr(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),c):Qh(p)?(e.consume(p),l):n(p)}function c(p){return xe(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):m(p)}function m(p){if((p===45||xe(p))&&r++<63){const g=p===45?m:f;return e.consume(p),g}return n(p)}}const Nn={tokenize:pd,partial:!0};function pd(e,t,n){return r;function r(s){return V(s)?Z(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||D(s)?t(s):n(s)}}const Ao={name:"blockQuote",tokenize:md,continuation:{tokenize:gd},exit:yd};function md(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return V(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function gd(e,t,n){const r=this;return i;function i(o){return V(o)?Z(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Ao,t,n)(o)}}function yd(e){e.exit("blockQuote")}const Co={name:"characterEscape",tokenize:wd};function wd(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Zh(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Oo={name:"characterReference",tokenize:bd};function bd(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=xe,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Xh,c):(e.enter("characterReferenceValue"),s=7,o=Er,c(f))}function c(f){if(f===59&&i){const m=e.exit("characterReferenceValue");return o===xe&&!So(r.sliceSerialize(m))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const ss={tokenize:xd,partial:!0},os={name:"codeFenced",tokenize:_d,concrete:!0};function _d(e,t,n){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return u;function u(x){return l(x)}function l(x){const U=r.events[r.events.length-1];return s=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),V(x)?Z(e,f,"whitespace")(x):f(x))}function f(x){return x===null||D(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(ss,w,P)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===null||D(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(x)):V(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Z(e,p,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),m)}function p(x){return x===null||D(x)?f(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(x))}function g(x){return x===null||D(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(x)):x===96&&x===a?n(x):(e.consume(x),g)}function w(x){return e.attempt(i,P,E)(x)}function E(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&V(x)?Z(e,b,"linePrefix",s+1)(x):b(x)}function b(x){return x===null||D(x)?e.check(ss,w,P)(x):(e.enter("codeFlowValue"),k(x))}function k(x){return x===null||D(x)?(e.exit("codeFlowValue"),b(x)):(e.consume(x),k)}function P(x){return e.exit("codeFenced"),t(x)}function T(x,U,Y){let J=0;return ne;function ne(B){return x.enter("lineEnding"),x.consume(B),x.exit("lineEnding"),R}function R(B){return x.enter("codeFencedFence"),V(B)?Z(x,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):L(B)}function L(B){return B===a?(x.enter("codeFencedFenceSequence"),K(B)):Y(B)}function K(B){return B===a?(J++,x.consume(B),K):J>=o?(x.exit("codeFencedFenceSequence"),V(B)?Z(x,X,"whitespace")(B):X(B)):Y(B)}function X(B){return B===null||D(B)?(x.exit("codeFencedFence"),U(B)):Y(B)}}}function xd(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Kn={name:"codeIndented",tokenize:Sd},kd={tokenize:Ed,partial:!0};function Sd(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Z(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):D(l)?e.attempt(kd,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||D(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Ed(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):D(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Z(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):D(o)?i(o):n(o)}}const Ad={name:"codeText",tokenize:vd,resolve:Cd,previous:Od};function Cd(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Od(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vd(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):D(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||D(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class Td{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&gt(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),gt(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),gt(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);gt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);gt(this.left,n.reverse())}}}function gt(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function vo(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new Td(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Rd(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Ue(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Rd(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,m=-1,p=n,g=0,w=0;const E=[w];for(;p;){for(;e.get(++i)[1]!==p;);s.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),f&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=p,p=p.next}for(p=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(w=m+1,E.push(w),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):E.pop(),m=E.length;m--;){const y=a.slice(E[m],E[m+1]),b=s.pop();u.push([b,b+y.length-1]),e.splice(b,2,y)}for(u.reverse(),m=-1;++m<u.length;)l[g+u[m][0]]=g+u[m][1],g+=u[m][1]-u[m][0]-1;return l}const Id={tokenize:Nd,resolve:Pd},Ld={tokenize:Md,partial:!0};function Pd(e){return vo(e),e}function Nd(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):D(a)?e.check(Ld,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Md(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Z(e,s,"linePrefix")}function s(o){if(o===null||D(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function To(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),m):y===null||y===32||y===41||Sr(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),w(y))}function m(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(e.exit("chunkString"),e.exit(a),m(y)):y===null||y===60||D(y)?n(y):(e.consume(y),y===92?g:p)}function g(y){return y===60||y===62||y===92?(e.consume(y),p):p(y)}function w(y){return!c&&(y===null||y===41||ye(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,w):y===41?(e.consume(y),c--,w):y===null||y===32||y===40||Sr(y)?n(y):(e.consume(y),y===92?E:w)}function E(y){return y===40||y===41||y===92?(e.consume(y),w):w(y)}}function Ro(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(s),c}function c(p){return a>999||p===null||p===91||p===93&&!u||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(e.exit(s),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):D(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||D(p)||a++>999?(e.exit("chunkString"),c(p)):(e.consume(p),u||(u=!V(p)),p===92?m:f)}function m(p){return p===91||p===92||p===93?(e.consume(p),a++,f):f(p)}}function Io(e,t,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(e.enter(r),e.enter(i),e.consume(m),e.exit(i),o=m===40?41:m,u):n(m)}function u(m){return m===o?(e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):(e.enter(s),l(m))}function l(m){return m===o?(e.exit(s),u(o)):m===null?n(m):D(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Z(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(m))}function c(m){return m===o||m===null||D(m)?(e.exit("chunkString"),l(m)):(e.consume(m),m===92?f:c)}function f(m){return m===o||m===92?(e.consume(m),c):c(m)}}function At(e,t){let n;return r;function r(i){return D(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):V(i)?Z(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Fd={name:"definition",tokenize:Bd},Dd={tokenize:zd,partial:!0};function Bd(e,t,n){const r=this;let i;return s;function s(p){return e.enter("definition"),o(p)}function o(p){return Ro.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return i=Rt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),u):n(p)}function u(p){return ye(p)?At(e,l)(p):l(p)}function l(p){return To(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function c(p){return e.attempt(Dd,f,f)(p)}function f(p){return V(p)?Z(e,m,"whitespace")(p):m(p)}function m(p){return p===null||D(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function zd(e,t,n){return r;function r(a){return ye(a)?At(e,i)(a):n(a)}function i(a){return Io(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return V(a)?Z(e,o,"whitespace")(a):o(a)}function o(a){return a===null||D(a)?t(a):n(a)}}const $d={name:"hardBreakEscape",tokenize:Ud};function Ud(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return D(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const jd={name:"headingAtx",tokenize:qd,resolve:Wd};function Wd(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ue(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function qd(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ye(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||D(c)?(e.exit("atxHeading"),t(c)):V(c)?Z(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ye(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Hd=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],as=["pre","script","style","textarea"],Vd={name:"htmlFlow",tokenize:Jd,resolveTo:Yd,concrete:!0},Kd={tokenize:Xd,partial:!0},Gd={tokenize:Qd,partial:!0};function Yd(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Jd(e,t,n){const r=this;let i,s,o,a,u;return l;function l(d){return c(d)}function c(d){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(d),f}function f(d){return d===33?(e.consume(d),m):d===47?(e.consume(d),s=!0,w):d===63?(e.consume(d),i=3,r.interrupt?t:h):Ne(d)?(e.consume(d),o=String.fromCharCode(d),E):n(d)}function m(d){return d===45?(e.consume(d),i=2,p):d===91?(e.consume(d),i=5,a=0,g):Ne(d)?(e.consume(d),i=4,r.interrupt?t:h):n(d)}function p(d){return d===45?(e.consume(d),r.interrupt?t:h):n(d)}function g(d){const v="CDATA[";return d===v.charCodeAt(a++)?(e.consume(d),a===v.length?r.interrupt?t:L:g):n(d)}function w(d){return Ne(d)?(e.consume(d),o=String.fromCharCode(d),E):n(d)}function E(d){if(d===null||d===47||d===62||ye(d)){const v=d===47,$=o.toLowerCase();return!v&&!s&&as.includes($)?(i=1,r.interrupt?t(d):L(d)):Hd.includes(o.toLowerCase())?(i=6,v?(e.consume(d),y):r.interrupt?t(d):L(d)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(d):s?b(d):k(d))}return d===45||xe(d)?(e.consume(d),o+=String.fromCharCode(d),E):n(d)}function y(d){return d===62?(e.consume(d),r.interrupt?t:L):n(d)}function b(d){return V(d)?(e.consume(d),b):ne(d)}function k(d){return d===47?(e.consume(d),ne):d===58||d===95||Ne(d)?(e.consume(d),P):V(d)?(e.consume(d),k):ne(d)}function P(d){return d===45||d===46||d===58||d===95||xe(d)?(e.consume(d),P):T(d)}function T(d){return d===61?(e.consume(d),x):V(d)?(e.consume(d),T):k(d)}function x(d){return d===null||d===60||d===61||d===62||d===96?n(d):d===34||d===39?(e.consume(d),u=d,U):V(d)?(e.consume(d),x):Y(d)}function U(d){return d===u?(e.consume(d),u=null,J):d===null||D(d)?n(d):(e.consume(d),U)}function Y(d){return d===null||d===34||d===39||d===47||d===60||d===61||d===62||d===96||ye(d)?T(d):(e.consume(d),Y)}function J(d){return d===47||d===62||V(d)?k(d):n(d)}function ne(d){return d===62?(e.consume(d),R):n(d)}function R(d){return d===null||D(d)?L(d):V(d)?(e.consume(d),R):n(d)}function L(d){return d===45&&i===2?(e.consume(d),re):d===60&&i===1?(e.consume(d),ee):d===62&&i===4?(e.consume(d),C):d===63&&i===3?(e.consume(d),h):d===93&&i===5?(e.consume(d),S):D(d)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Kd,M,K)(d)):d===null||D(d)?(e.exit("htmlFlowData"),K(d)):(e.consume(d),L)}function K(d){return e.check(Gd,X,M)(d)}function X(d){return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),B}function B(d){return d===null||D(d)?K(d):(e.enter("htmlFlowData"),L(d))}function re(d){return d===45?(e.consume(d),h):L(d)}function ee(d){return d===47?(e.consume(d),o="",ce):L(d)}function ce(d){if(d===62){const v=o.toLowerCase();return as.includes(v)?(e.consume(d),C):L(d)}return Ne(d)&&o.length<8?(e.consume(d),o+=String.fromCharCode(d),ce):L(d)}function S(d){return d===93?(e.consume(d),h):L(d)}function h(d){return d===62?(e.consume(d),C):d===45&&i===2?(e.consume(d),h):L(d)}function C(d){return d===null||D(d)?(e.exit("htmlFlowData"),M(d)):(e.consume(d),C)}function M(d){return e.exit("htmlFlow"),t(d)}}function Qd(e,t,n){const r=this;return i;function i(o){return D(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Xd(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Nn,t,n)}}const Zd={name:"htmlText",tokenize:ep};function ep(e,t,n){const r=this;let i,s,o;return a;function a(h){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(h),u}function u(h){return h===33?(e.consume(h),l):h===47?(e.consume(h),T):h===63?(e.consume(h),k):Ne(h)?(e.consume(h),Y):n(h)}function l(h){return h===45?(e.consume(h),c):h===91?(e.consume(h),s=0,g):Ne(h)?(e.consume(h),b):n(h)}function c(h){return h===45?(e.consume(h),p):n(h)}function f(h){return h===null?n(h):h===45?(e.consume(h),m):D(h)?(o=f,ee(h)):(e.consume(h),f)}function m(h){return h===45?(e.consume(h),p):f(h)}function p(h){return h===62?re(h):h===45?m(h):f(h)}function g(h){const C="CDATA[";return h===C.charCodeAt(s++)?(e.consume(h),s===C.length?w:g):n(h)}function w(h){return h===null?n(h):h===93?(e.consume(h),E):D(h)?(o=w,ee(h)):(e.consume(h),w)}function E(h){return h===93?(e.consume(h),y):w(h)}function y(h){return h===62?re(h):h===93?(e.consume(h),y):w(h)}function b(h){return h===null||h===62?re(h):D(h)?(o=b,ee(h)):(e.consume(h),b)}function k(h){return h===null?n(h):h===63?(e.consume(h),P):D(h)?(o=k,ee(h)):(e.consume(h),k)}function P(h){return h===62?re(h):k(h)}function T(h){return Ne(h)?(e.consume(h),x):n(h)}function x(h){return h===45||xe(h)?(e.consume(h),x):U(h)}function U(h){return D(h)?(o=U,ee(h)):V(h)?(e.consume(h),U):re(h)}function Y(h){return h===45||xe(h)?(e.consume(h),Y):h===47||h===62||ye(h)?J(h):n(h)}function J(h){return h===47?(e.consume(h),re):h===58||h===95||Ne(h)?(e.consume(h),ne):D(h)?(o=J,ee(h)):V(h)?(e.consume(h),J):re(h)}function ne(h){return h===45||h===46||h===58||h===95||xe(h)?(e.consume(h),ne):R(h)}function R(h){return h===61?(e.consume(h),L):D(h)?(o=R,ee(h)):V(h)?(e.consume(h),R):J(h)}function L(h){return h===null||h===60||h===61||h===62||h===96?n(h):h===34||h===39?(e.consume(h),i=h,K):D(h)?(o=L,ee(h)):V(h)?(e.consume(h),L):(e.consume(h),X)}function K(h){return h===i?(e.consume(h),i=void 0,B):h===null?n(h):D(h)?(o=K,ee(h)):(e.consume(h),K)}function X(h){return h===null||h===34||h===39||h===60||h===61||h===96?n(h):h===47||h===62||ye(h)?J(h):(e.consume(h),X)}function B(h){return h===47||h===62||ye(h)?J(h):n(h)}function re(h){return h===62?(e.consume(h),e.exit("htmlTextData"),e.exit("htmlText"),t):n(h)}function ee(h){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),ce}function ce(h){return V(h)?Z(e,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h):S(h)}function S(h){return e.enter("htmlTextData"),o(h)}}const Jr={name:"labelEnd",tokenize:op,resolveTo:sp,resolveAll:ip},tp={tokenize:ap},np={tokenize:lp},rp={tokenize:up};function ip(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function sp(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=he(a,e.slice(s+1,s+r+3)),a=he(a,[["enter",c,t]]),a=he(a,Yr(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=he(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=he(a,e.slice(o+1)),a=he(a,[["exit",u,t]]),Ue(e,s,e.length,a),e}function op(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?f(m):(o=r.parser.defined.includes(Rt(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),u):n(m)}function u(m){return m===40?e.attempt(tp,c,o?c:f)(m):m===91?e.attempt(np,c,o?l:f)(m):o?c(m):f(m)}function l(m){return e.attempt(rp,c,f)(m)}function c(m){return t(m)}function f(m){return s._balanced=!0,n(m)}}function ap(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ye(f)?At(e,s)(f):s(f)}function s(f){return f===41?c(f):To(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return ye(f)?At(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Io(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return ye(f)?At(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function lp(e,t,n){const r=this;return i;function i(a){return Ro.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Rt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function up(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const cp={name:"labelStartImage",tokenize:fp,resolveAll:Jr.resolveAll};function fp(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const hp={name:"labelStartLink",tokenize:dp,resolveAll:Jr.resolveAll};function dp(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Gn={name:"lineEnding",tokenize:pp};function pp(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Z(e,t,"linePrefix")}}const cn={name:"thematicBreak",tokenize:mp};function mp(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||D(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),V(l)?Z(e,a,"whitespace")(l):a(l))}}const ge={name:"list",tokenize:wp,continuation:{tokenize:bp},exit:xp},gp={tokenize:kp,partial:!0},yp={tokenize:_p,partial:!0};function wp(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Er(p)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(cn,n,l)(p):l(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(p)}return n(p)}function u(p){return Er(p)&&++o<10?(e.consume(p),u):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),l(p)):n(p)}function l(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(Nn,r.interrupt?n:c,e.attempt(gp,m,f))}function c(p){return r.containerState.initialBlankLine=!0,s++,m(p)}function f(p){return V(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),m):n(p)}function m(p){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function bp(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Nn,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Z(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!V(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(yp,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Z(e,e.attempt(ge,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function _p(e,t,n){const r=this;return Z(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function xp(e){e.exit(this.containerState.type)}function kp(e,t,n){const r=this;return Z(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!V(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ls={name:"setextUnderline",tokenize:Ep,resolveTo:Sp};function Sp(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Ep(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),V(l)?Z(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||D(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Ap={tokenize:Cp};function Cp(e){const t=this,n=e.attempt(Nn,r,e.attempt(this.parser.constructs.flowInitial,i,Z(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Id,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Op={resolveAll:Po()},vp=Lo("string"),Tp=Lo("text");function Lo(e){return{tokenize:t,resolveAll:Po(e==="text"?Rp:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let m=-1;if(f)for(;++m<f.length;){const p=f[m];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Po(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Rp(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Ip(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:k,exit:P,attempt:U(T),check:U(x),interrupt:U(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:p,sliceSerialize:m,now:g,defineSkip:w,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=he(o,R),E(),o[o.length-1]!==null?[]:(Y(t,0),l.events=Yr(s,l.events,l),l.events)}function m(R,L){return Pp(p(R),L)}function p(R){return Lp(o,R)}function g(){const{line:R,column:L,offset:K,_index:X,_bufferIndex:B}=r;return{line:R,column:L,offset:K,_index:X,_bufferIndex:B}}function w(R){i[R.line]=R.column,ne()}function E(){let R;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<L.length;)y(L.charCodeAt(r._bufferIndex));else y(L)}}function y(R){c=c(R)}function b(R){D(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,ne()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function k(R,L){const K=L||{};return K.type=R,K.start=g(),l.events.push(["enter",K,l]),a.push(K),K}function P(R){const L=a.pop();return L.end=g(),l.events.push(["exit",L,l]),L}function T(R,L){Y(R,L.from)}function x(R,L){L.restore()}function U(R,L){return K;function K(X,B,re){let ee,ce,S,h;return Array.isArray(X)?M(X):"tokenize"in X?M([X]):C(X);function C(F){return W;function W(H){const Ce=H!==null&&F[H],fe=H!==null&&F.null,be=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return M(be)(H)}}function M(F){return ee=F,ce=0,F.length===0?re:d(F[ce])}function d(F){return W;function W(H){return h=J(),S=F,F.partial||(l.currentConstruct=F),F.name&&l.parser.constructs.disable.null.includes(F.name)?$():F.tokenize.call(L?Object.assign(Object.create(l),L):l,u,v,$)(H)}}function v(F){return R(S,h),B}function $(F){return h.restore(),++ce<ee.length?d(ee[ce]):re}}}function Y(R,L){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Ue(l.events,L,l.events.length-L,R.resolve(l.events.slice(L),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function J(){const R=g(),L=l.previous,K=l.currentConstruct,X=l.events.length,B=Array.from(a);return{restore:re,from:X};function re(){r=R,l.previous=L,l.currentConstruct=K,l.events.length=X,a=B,ne()}}function ne(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Lp(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Pp(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Np={42:ge,43:ge,45:ge,48:ge,49:ge,50:ge,51:ge,52:ge,53:ge,54:ge,55:ge,56:ge,57:ge,62:Ao},Mp={91:Fd},Fp={[-2]:Kn,[-1]:Kn,32:Kn},Dp={35:jd,42:cn,45:[ls,cn],60:Vd,61:ls,95:cn,96:os,126:os},Bp={38:Oo,92:Co},zp={[-5]:Gn,[-4]:Gn,[-3]:Gn,33:cp,38:Oo,42:Ar,60:[hd,Zd],91:hp,92:[$d,Co],93:Jr,95:Ar,96:Ad},$p={null:[Ar,Op]},Up={null:[42,95]},jp={null:[]},Wp=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Up,contentInitial:Mp,disable:jp,document:Np,flow:Dp,flowInitial:Fp,insideSpan:$p,string:Bp,text:zp},Symbol.toStringTag,{value:"Module"}));function qp(e){const n=qh([Wp,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(sd),document:i(ad),flow:i(Ap),string:i(vp),text:i(Tp)};return r;function i(s){return o;function o(a){return Ip(r,s,a)}}}function Hp(e){for(;!vo(e););return e}const us=/[\0\t\n\r]/g;function Vp(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,m,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(us.lastIndex=f,l=us.exec(s),m=l&&l.index!==void 0?l.index:s.length,p=s.charCodeAt(m),!l){t=s.slice(f);break}if(p===10&&f===m&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<m&&(u.push(s.slice(f,m)),e+=m-f),p){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=m+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Kp(e,t,n){return typeof t!="string"&&(n=t,t=void 0),id(n)(Hp(qp(n).document().write(Vp()(e,t,!0))))}let A;const No=typeof TextDecoder>"u"?{decode:()=>{throw new Error("TextDecoder not available")}}:new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});typeof TextDecoder<"u"&&No.decode();let _t=null;function Qr(){return(_t===null||_t.byteLength===0)&&(_t=new Uint8Array(A.memory.buffer)),_t}function It(e,t){return e=e>>>0,No.decode(Qr().subarray(e,e+t))}let at=0;function Cr(e,t){const n=t(e.length*1,1)>>>0;return Qr().set(e,n/1),at=e.length,n}let xt=null;function z(){return(xt===null||xt.byteLength===0)&&(xt=new Int32Array(A.memory.buffer)),xt}function qe(e){const t=A.__wbindgen_export_0.get(e);return A.__externref_table_dealloc(e),t}function yt(e,t){if(!(e instanceof t))throw new TypeError(`expected instance of ${t.name}`);return e.ptr}let kt=null;function Mo(){return(kt===null||kt.byteLength===0)&&(kt=new Uint32Array(A.memory.buffer)),kt}function Ct(e,t){e=e>>>0;const r=Mo().subarray(e/4,e/4+t),i=[];for(const s of r)i.push(A.__wbindgen_export_0.get(s));return A.__externref_drop_slice(e,t),i}function Gp(e){const t=A.__externref_table_alloc();return A.__wbindgen_export_0.set(t,e),t}function Yp(e,t){const n=t(e.length*4,4)>>>0,r=Mo();for(const[i,s]of e.entries())r[n/4+i]=Gp(s);return at=e.length,n}function Jp(e,t){return e=e>>>0,Qr().subarray(e/1,e/1+t)}let St=null;function Qp(){return(St===null||St.byteLength===0)&&(St=new Float32Array(A.memory.buffer)),St}function cs(e,t){return e=e>>>0,Qp().subarray(e/4,e/4+t)}const fs=new FinalizationRegistry(e=>A.__wbg_detectedline_free(e>>>0));class Lt{static __wrap(t){t=t>>>0;const n=Object.create(Lt.prototype);return n.__wbg_ptr=t,fs.register(n,n.__wbg_ptr,n),n}static __unwrap(t){return t instanceof Lt?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,fs.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_detectedline_free(t)}rotatedRect(){const t=A.detectedline_rotatedRect(this.__wbg_ptr);return Ut.__wrap(t)}words(){try{const i=A.__wbindgen_add_to_stack_pointer(-16);A.detectedline_words(i,this.__wbg_ptr);var t=z()[i/4+0],n=z()[i/4+1],r=[...Ct(t,n)];return A.__wbindgen_free(t,n*4,4),r}finally{A.__wbindgen_add_to_stack_pointer(16)}}}const hs=new FinalizationRegistry(e=>A.__wbg_image_free(e>>>0));class Xe{static __wrap(t){t=t>>>0;const n=Object.create(Xe.prototype);return n.__wbg_ptr=t,hs.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,hs.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_image_free(t)}channels(){return A.image_channels(this.__wbg_ptr)>>>0}width(){return A.image_width(this.__wbg_ptr)>>>0}height(){return A.image_height(this.__wbg_ptr)>>>0}data(){try{const i=A.__wbindgen_add_to_stack_pointer(-16);A.image_data(i,this.__wbg_ptr);var t=z()[i/4+0],n=z()[i/4+1],r=[...Jp(t,n)];return A.__wbindgen_free(t,n*1,1),r}finally{A.__wbindgen_add_to_stack_pointer(16)}}}const Xp=new FinalizationRegistry(e=>A.__wbg_ocrengine_free(e>>>0));class Zp{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Xp.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_ocrengine_free(t)}constructor(t){try{const o=A.__wbindgen_add_to_stack_pointer(-16);yt(t,Fo);var n=t.__destroy_into_raw();A.ocrengine_new(o,n);var r=z()[o/4+0],i=z()[o/4+1],s=z()[o/4+2];if(s)throw qe(i);return this.__wbg_ptr=r>>>0,this}finally{A.__wbindgen_add_to_stack_pointer(16)}}loadImage(t,n,r){try{const a=A.__wbindgen_add_to_stack_pointer(-16),u=Cr(r,A.__wbindgen_malloc),l=at;A.ocrengine_loadImage(a,this.__wbg_ptr,t,n,u,l);var i=z()[a/4+0],s=z()[a/4+1],o=z()[a/4+2];if(o)throw qe(s);return Xe.__wrap(i)}finally{A.__wbindgen_add_to_stack_pointer(16)}}detectText(t){try{const a=A.__wbindgen_add_to_stack_pointer(-16);yt(t,Xe),A.ocrengine_detectText(a,this.__wbg_ptr,t.__wbg_ptr);var n=z()[a/4+0],r=z()[a/4+1],i=z()[a/4+2],s=z()[a/4+3];if(s)throw qe(i);var o=[...Ct(n,r)];return A.__wbindgen_free(n,r*4,4),o}finally{A.__wbindgen_add_to_stack_pointer(16)}}recognizeText(t,n){try{const u=A.__wbindgen_add_to_stack_pointer(-16);yt(t,Xe);const l=Yp(n,A.__wbindgen_malloc),c=at;A.ocrengine_recognizeText(u,this.__wbg_ptr,t.__wbg_ptr,l,c);var r=z()[u/4+0],i=z()[u/4+1],s=z()[u/4+2],o=z()[u/4+3];if(o)throw qe(s);var a=[...Ct(r,i)];return A.__wbindgen_free(r,i*4,4),a}finally{A.__wbindgen_add_to_stack_pointer(16)}}getText(t){let n,r;try{const c=A.__wbindgen_add_to_stack_pointer(-16);yt(t,Xe),A.ocrengine_getText(c,this.__wbg_ptr,t.__wbg_ptr);var i=z()[c/4+0],s=z()[c/4+1],o=z()[c/4+2],a=z()[c/4+3],u=i,l=s;if(a)throw u=0,l=0,qe(o);return n=u,r=l,It(u,l)}finally{A.__wbindgen_add_to_stack_pointer(16),A.__wbindgen_free(n,r,1)}}getTextLines(t){try{const a=A.__wbindgen_add_to_stack_pointer(-16);yt(t,Xe),A.ocrengine_getTextLines(a,this.__wbg_ptr,t.__wbg_ptr);var n=z()[a/4+0],r=z()[a/4+1],i=z()[a/4+2],s=z()[a/4+3];if(s)throw qe(i);var o=[...Ct(n,r)];return A.__wbindgen_free(n,r*4,4),o}finally{A.__wbindgen_add_to_stack_pointer(16)}}}const em=new FinalizationRegistry(e=>A.__wbg_ocrengineinit_free(e>>>0));class Fo{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,em.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_ocrengineinit_free(t)}constructor(){const t=A.ocrengineinit_new();return this.__wbg_ptr=t>>>0,this}setDetectionModel(t){try{const i=A.__wbindgen_add_to_stack_pointer(-16),s=Cr(t,A.__wbindgen_malloc),o=at;A.ocrengineinit_setDetectionModel(i,this.__wbg_ptr,s,o);var n=z()[i/4+0],r=z()[i/4+1];if(r)throw qe(n)}finally{A.__wbindgen_add_to_stack_pointer(16)}}setRecognitionModel(t){try{const i=A.__wbindgen_add_to_stack_pointer(-16),s=Cr(t,A.__wbindgen_malloc),o=at;A.ocrengineinit_setRecognitionModel(i,this.__wbg_ptr,s,o);var n=z()[i/4+0],r=z()[i/4+1];if(r)throw qe(n)}finally{A.__wbindgen_add_to_stack_pointer(16)}}}const ds=new FinalizationRegistry(e=>A.__wbg_rotatedrect_free(e>>>0));class Ut{static __wrap(t){t=t>>>0;const n=Object.create(Ut.prototype);return n.__wbg_ptr=t,ds.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ds.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_rotatedrect_free(t)}corners(){try{const i=A.__wbindgen_add_to_stack_pointer(-16);A.rotatedrect_corners(i,this.__wbg_ptr);var t=z()[i/4+0],n=z()[i/4+1],r=[...cs(t,n)];return A.__wbindgen_free(t,n*4,4),r}finally{A.__wbindgen_add_to_stack_pointer(16)}}boundingRect(){try{const i=A.__wbindgen_add_to_stack_pointer(-16);A.rotatedrect_boundingRect(i,this.__wbg_ptr);var t=z()[i/4+0],n=z()[i/4+1],r=[...cs(t,n)];return A.__wbindgen_free(t,n*4,4),r}finally{A.__wbindgen_add_to_stack_pointer(16)}}}const ps=new FinalizationRegistry(e=>A.__wbg_textline_free(e>>>0));class Xr{static __wrap(t){t=t>>>0;const n=Object.create(Xr.prototype);return n.__wbg_ptr=t,ps.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ps.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_textline_free(t)}text(){let t,n;try{const s=A.__wbindgen_add_to_stack_pointer(-16);A.textline_text(s,this.__wbg_ptr);var r=z()[s/4+0],i=z()[s/4+1];return t=r,n=i,It(r,i)}finally{A.__wbindgen_add_to_stack_pointer(16),A.__wbindgen_free(t,n,1)}}words(){try{const i=A.__wbindgen_add_to_stack_pointer(-16);A.textline_words(i,this.__wbg_ptr);var t=z()[i/4+0],n=z()[i/4+1],r=[...Ct(t,n)];return A.__wbindgen_free(t,n*4,4),r}finally{A.__wbindgen_add_to_stack_pointer(16)}}}const ms=new FinalizationRegistry(e=>A.__wbg_textword_free(e>>>0));class Zr{static __wrap(t){t=t>>>0;const n=Object.create(Zr.prototype);return n.__wbg_ptr=t,ms.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ms.unregister(this),t}free(){const t=this.__destroy_into_raw();A.__wbg_textword_free(t)}text(){let t,n;try{const s=A.__wbindgen_add_to_stack_pointer(-16);A.textword_text(s,this.__wbg_ptr);var r=z()[s/4+0],i=z()[s/4+1];return t=r,n=i,It(r,i)}finally{A.__wbindgen_add_to_stack_pointer(16),A.__wbindgen_free(t,n,1)}}rotatedRect(){const t=A.textword_rotatedRect(this.__wbg_ptr);return Ut.__wrap(t)}}async function tm(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")=="application/wasm")throw r;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function nm(){const e={};return e.wbg={},e.wbg.__wbg_rotatedrect_new=function(t){return Ut.__wrap(t)},e.wbg.__wbg_textword_new=function(t){return Zr.__wrap(t)},e.wbg.__wbg_textline_new=function(t){return Xr.__wrap(t)},e.wbg.__wbg_detectedline_new=function(t){return Lt.__wrap(t)},e.wbg.__wbg_detectedline_unwrap=function(t){return Lt.__unwrap(t)},e.wbg.__wbindgen_string_new=function(t,n){return It(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(It(t,n))},e.wbg.__wbindgen_init_externref_table=function(){const t=A.__wbindgen_export_0,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function rm(e,t){return A=e.exports,Do.__wbindgen_wasm_module=t,St=null,xt=null,kt=null,_t=null,A.__wbindgen_start(),A}async function Do(e){if(A!==void 0)return A;e===void 0&&(e=new URL("/spaced/ocr-demo/assets/ocrs_bg-BT9eRiEd.wasm",import.meta.url));const t=nm();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await tm(await e,t);return rm(n,r)}const im="/spaced/ocr-demo/assets/ocrs_bg-BT9eRiEd.wasm",sm="/spaced/ocr-demo/assets/text-detection-CfMuNY5k.rten",om="/spaced/ocr-demo/assets/text-recognition-Dp7PbkVt.rten",am=oe('<div class="absolute min-h-8 min-w-8 whitespace-pre rounded bg-white p-1 outline-1 hover:outline"tabindex=0>'),lm=oe("<div>"),um=oe("<div id=markdown-content>"),cm=oe('<div class="z-50 flex gap-1"><button class="flex h-8 w-8 place-content-center place-items-center rounded border-[1px] border-[#505050] bg-[#2D2D2D] text-gray-400 transition-colors hover:border-[#777777] hover:bg-[#333333]"></button><select class="flex h-8 w-24 place-content-center place-items-center rounded border-[1px] border-[#505050] bg-[#2D2D2D] px-1 text-gray-400 transition-colors hover:border-[#777777] hover:bg-[#333333]"><option value=tesserect>Tesserect.js</option><option value=ocrs>Ocrs'),fm=oe("<img>"),hm=oe("<object>");function dm(e){if(e.inputType==="insertParagraph"){e.preventDefault();const t=document.createTextNode(`
`),n=window.getSelection();if(n){const r=n.getRangeAt(0);r.deleteContents(),r.insertNode(t),r.setStartAfter(t),r.setEndAfter(t),n.removeAllRanges(),n.addRange(r)}}}function gs(e,t,n,r){An(()=>{e.addEventListener(t,n,r),Mt(()=>{e.removeEventListener(t,n,r)})})}function pm(e,t){function n(r){!e||r.composedPath().includes(e)||t(r)}gs(document,"mousedown",n),gs(document,"touchstart",n)}function mm(e){const{absoluteViewportPosition:t,scalar:n}=Gr(),r=we(()=>Pc(new ae(e.item.x,e.item.y),t(),n())),{getSelected:i,holdingCtrl:s,holdingShift:o,register:a,unregister:u}=bo(),{deleteItem:l}=ht(),c=we(()=>i().has(e.item.id));function f(){a(e.item.id)}function m(){s()||o()||u(e.item.id)}async function p(E){if(E.stopPropagation(),E.key==="Delete"){try{const y=await l(e.item.id);e.setItems(b=>b.filter(k=>k.id!=y))}catch{}return}}let g;Ge(()=>{pm(g,m)});const w=yn({ref:g,scalar:n,selected:c,translation:r},e);return(()=>{const E=am(),y=g;return typeof y=="function"?Ye(y,E):g=E,E.$$keyup=p,E.$$click=f,E.style.setProperty("pointer-events","all"),E.style.setProperty("transform-origin","top left"),le(E,Q(jl,{get fallback(){return Q(gm,w)},get children(){return Q(bm,w)}})),Ie(b=>{const k=c()?"solid":"unset",P=`
          ${r().x}px
          ${-r().y}px
        `,T=String(n());return k!==b._v$&&((b._v$=k)!=null?E.style.setProperty("outline-style",k):E.style.removeProperty("outline-style")),P!==b._v$2&&((b._v$2=P)!=null?E.style.setProperty("translate",P):E.style.removeProperty("translate")),T!==b._v$3&&((b._v$3=T)!=null?E.style.setProperty("scale",T):E.style.removeProperty("scale")),b},{_v$:void 0,_v$2:void 0,_v$3:void 0}),E})()}function gm(){return"Error occured"}const ym={"text/plain":_m,"text/markdown":xm,"image/png":Zt,"image/svg+xml":Zt,"image/jpeg":Zt,"image/gif":Zt,"application/pdf":km};function wm(e){return`Unkown media type:
${e.item.mime}`}function bm(e){return Q(cu,yn({get component(){return ym?.[e.item.mime]??wm}},e))}function _m(e){const{updateItem:t}=ht();let n;async function r(i){i.stopPropagation(),await t({...e.item,schema:n.textContent})}return(()=>{const i=lm(),s=n;return typeof s=="function"?Ye(s,i):n=i,i.$$keyup=r,i.$$beforeinput=dm,i.addEventListener("paste",o=>o.stopPropagation()),i.style.setProperty("line-height","1rem"),le(i,()=>e.item.schema),Ie(()=>wn(i,"contenteditable",e.selected())),i})()}function xm(e){let t;return Ge(async()=>{const n=Kp(e.item.schema??"",{});t.innerHTML=String(n)}),(()=>{const n=um(),r=t;return typeof r=="function"?Ye(r,n):t=n,n})()}function Zt(e){let t;const[n,r]=ue(!0),[i,s]=ue("tesserect");async function o(u){s(u.target.value)}async function a(){if(!e.item.file)return;console.log(`recognizing with ${i()}`);let u;switch(i()){case"ocrs":{await Do(fetch(im));const l=new Fo,c=await fetch(sm),f=await fetch(om);l.setDetectionModel(new Uint8Array(await c.arrayBuffer())),l.setRecognitionModel(new Uint8Array(await f.arrayBuffer()));const m=new Zp(l),p=new Uint8Array(e.item.file),g=new Blob([p],{type:e.item.mime}),w=URL.createObjectURL(g);await createImageBitmap(g).then(E=>{const b=new OffscreenCanvas(E.width,E.height).getContext("2d");b.drawImage(E,0,0);const k=b.getImageData(0,0,E.width,E.height),P=m.loadImage(k.width,k.height,new Uint8Array(k.data));u=m.getText(P),URL.revokeObjectURL(w)});break}case"tesserect":{u=(await Am.recognize(e.item.file)).data.text;break}}console.log(u)}return An(()=>{r(e.selected())}),Ge(()=>{if(e.item.file){const u=new Uint8Array(e.item.file),l=new Blob([u],{type:e.item.mime});t.src=URL.createObjectURL(l)}}),[Q(st,{get when(){return n()},get children(){const u=cm(),l=u.firstChild,c=l.nextSibling;return l.$$click=a,le(l,Q(Lc,{})),c.addEventListener("change",o),Ie(()=>c.value=i()),u}}),(()=>{const u=fm(),l=t;return typeof l=="function"?Ye(l,u):t=u,u})()]}function km(e){let t;return Ge(()=>{if(e.item.file){const n=new Uint8Array(e.item.file),r=new Blob([n],{type:e.item.mime});t.data=URL.createObjectURL(r)}}),(()=>{const n=hm(),r=t;return typeof r=="function"?Ye(r,n):t=n,n.style.setProperty("pointer-events","all"),n})()}ut(["click","keyup","beforeinput"]);const Sm=oe('<main class="absolute h-full w-full">');function Em(){const{absoluteViewportPosition:e,lastRelativePointerPosition:t,scalar:n}=Gr(),{items:r,setItems:i}=Ln(),{connect:s,createItem:o,getNearByItems:a}=ht();async function u(l){const c=l.dataTransfer?.files[0];if(!c)return;const f=vt(new ae(l.clientX,-l.clientY),e(),n());try{const m=await o({x:Math.floor(f.x),y:Math.floor(f.y),w:0,h:0,name:c.name,mime:c.type,schema:c.type.startsWith("text")?await c.text():"",file:c.type.startsWith("text")?void 0:[...new Uint8Array(await c.arrayBuffer())]});i(p=>p.concat(m))}catch{}}return window.addEventListener("paste",async l=>{l.preventDefault();const c=vt(t(),e(),n());if(!l.clipboardData||l.clipboardData.items.length===0)return;const f=[...l.clipboardData.items].at(-1);if(f.kind==="string"){f.getAsString(async p=>{try{const g=await o({x:Math.floor(c.x),y:Math.floor(c.y),w:0,h:0,name:"test",mime:"text/plain",schema:p});i(w=>w.concat(g))}catch{}});return}const m=f?.getAsFile();if(!(!m||!Yf.has(m.type)))try{const p=await o({x:Math.floor(c.x),y:Math.floor(c.y),w:0,h:0,name:m.name,mime:m.type,schema:m.type.startsWith("text")?await m.text():"",file:m.type.startsWith("text")?void 0:[...new Uint8Array(await m.arrayBuffer())]});i(g=>g.concat(p))}catch{}}),Ge(async()=>{try{await s();const l=await a();i(l)}catch{}}),Q(Ph,{get children(){return Q(Sh,{get children(){return Q(nh,{get children(){return[Q(Wh,{}),(()=>{const l=Sm();return l.addEventListener("drop",u),le(l,Q(Uh,{}),null),le(l,Q(Ul,{get each(){return r()},children:(c,f)=>Q(mm,{get index(){return f()},item:c,setItems:i})}),null),l})()]}})}})}})}window.addEventListener("dragover",e=>{e.preventDefault()});window.addEventListener("drop",e=>{e.preventDefault()});te.create({baseURL:window.location.origin});Zl(Em,document.body);const Am=await Oc.createWorker("eng");
